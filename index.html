<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>WUIZZIZZZ - Super Quiz Olimpiade Sains IPS SMP</title>
    <meta property="og:image" content="https://files.catbox.moe/j4r8jq.png">
    <link rel="icon" href="https://files.catbox.moe/j4r8jq.png">
    
    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;700&family=Comic+Neue:wght@400;700&display=swap" rel="stylesheet">
    
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    fontFamily: {
                        poppins: ['Poppins', 'sans-serif'],
                        playful: ['Comic Neue', 'cursive'],
                    },
                    animation: {
                        'pulse-fast': 'pulse 1s cubic-bezier(0.4, 0, 0.6, 1) infinite',
                        'bounce-fast': 'bounce 0.5s infinite',
                    }
                }
            }
        }
    </script>
    
    <!-- SweetAlert2 -->
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
    
    <!-- Google Icons -->
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
    
    <style>
        .btn-primary {
            background: linear-gradient(135deg, #FF6B00, #F4C425);
            transition: all 0.3s ease;
        }
        
        .btn-primary:hover {
            transform: scale(1.05);
            box-shadow: 0 10px 25px rgba(255, 107, 0, 0.3);
        }
        
        .btn-secondary {
            background: linear-gradient(135deg, #4A90E2, #10B981);
        }
        
        .btn-secondary:hover {
            transform: scale(1.05);
            box-shadow: 0 10px 15px rgba(74, 144, 226, 0.3);
        }
        
        .confetti {
            position: absolute;
            width: 10px;
            height: 10px;
            background: #FF6B00;
            animation: confetti-fall 2s ease-out forwards;
        }
        
        @keyframes confetti-fall {
            0% { transform: translateY(-100px) rotate(0deg); opacity: 1; }
            100% { transform: translateY(300px) rotate(360deg); opacity: 0; }
        }
        
        .fire-effect {
            position: absolute;
            width: 100px;
            height: 100px;
            background: radial-gradient(circle, rgba(255,200,0,0.8) 0%, rgba(255,100,0,0.5) 50%, rgba(255,50,0,0) 70%);
            border-radius: 50%;
            filter: blur(5px);
            animation: fire-flicker 1s ease-in-out infinite alternate;
        }
        
        @keyframes fire-flicker {
            0% { transform: scale(1); opacity: 0.8; }
            100% { transform: scale(1.1); opacity: 1; }
        }
        
        .medal-glow {
            animation: medal-glow 2s ease-in-out infinite alternate;
        }
        
        @keyframes medal-glow {
            0% { filter: drop-shadow(0 0 5px rgba(255, 215, 0, 0.7)); }
            100% { filter: drop-shadow(0 0 20px rgba(255, 215, 0, 0.9)); }
        }
        
        .question-card {
            transition: all 0.3s ease;
        }
        
        .question-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.1);
        }
        
        .correct-answer {
            animation: correct-pulse 0.5s ease-in-out;
        }
        
        @keyframes correct-pulse {
            0% { transform: scale(1); box-shadow: 0 0 0 rgba(16, 185, 129, 0); }
            50% { transform: scale(1.05); box-shadow: 0 0 20px rgba(16, 185, 129, 0.5); }
            100% { transform: scale(1); box-shadow: 0 0 0 rgba(16, 185, 129, 0); }
        }
        
        .incorrect-shake {
            animation: shake 0.5s ease-in-out;
        }
        
        @keyframes shake {
            0%, 100% { transform: translateX(0); }
            25% { transform: translateX(-5px); }
            75% { transform: translateX(5px); }
        }
        
        .timer-danger {
            animation: pulse-fast 1s infinite;
        }
    </style>
</head>
<body class="font-poppins min-h-screen bg-gray-50">
    <div id="app" class="min-h-screen flex flex-col">
        <!-- Login Screen -->
        <div id="loginScreen" class="min-h-screen flex items-center justify-center p-4 bg-gradient-to-br from-orange-50 to-yellow-100">
            <div class="bg-white rounded-2xl shadow-xl p-8 w-full max-w-md">
                <div class="text-center mb-8">
                    <div class="flex justify-center mb-4">
                        <div class="w-16 h-16 bg-gradient-to-r from-orange-500 to-yellow-400 rounded-full flex items-center justify-center">
                            <span class="text-white text-3xl font-bold">W</span>
                        </div>
                    </div>
                    <h1 class="text-4xl font-bold bg-gradient-to-r from-orange-500 to-yellow-400 bg-clip-text text-transparent mb-2">WUIZZIZZZ</h1>
                    <p class="text-gray-600">Persiapan OSN IPS SMP</p>
                </div>
                
                <form id="loginForm" class="space-y-4">
                    <div>
                        <label for="playerName" class="block text-gray-700 mb-2">Nama Lengkap</label>
                        <input type="text" id="playerName" required class="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-orange-500" placeholder="Masukkan nama Anda">
                    </div>
                    
                    <div>
                        <label for="playerUsername" class="block text-gray-700 mb-2">Username EX: ZAM ZAM</label>
                        <input type="text" id="playerUsername" required class="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-orange-500" placeholder="Pilih username (aa-jj)">
                        <p class="text-sm text-gray-500 mt-1">Username valid: aa, bb, cc, ..., jj</p>
                        <footer class="mt-8 text-gray-600">Â© 2025 WUIZZIZZZ - Super Quiz IPS by <b>ZAM ZAM<b></footer>
    </div>
                    </div>
                    
                    <button type="submit" class="btn-primary text-white px-6 py-3 rounded-lg font-bold w-full flex items-center justify-center">
                        <span class="material-icons mr-2">rocket_launch</span> Mulai Quiz
                    </button>
                </form>
            </div>
        </div>

        <!-- Quiz Container -->
        <div id="quizContainer" class="hidden min-h-screen">
            <!-- Header -->
            <header class="bg-white shadow-md py-4 px-6">
                <div class="max-w-6xl mx-auto flex justify-between items-center">
                    <div class="flex items-center space-x-4">
                        <button onclick="showHome()" class="text-gray-600 hover:text-orange-500">
                            <span class="material-icons">home</span>
                        </button>
                        <div id="quizTitle" class="font-bold text-lg">WUIZZIZZ | SUPER QUIZ</div>
                    </div>
                    
                    <div class="flex items-center space-x-6">
                        <div class="flex items-center space-x-2">
                            <span class="material-icons text-orange-500">stars</span>
                            <span id="scoreDisplay" class="font-bold">0</span>
                        </div>
                        
                        <div class="flex items-center space-x-2">
                            <span class="material-icons text-blue-500">timer</span>
                            <span id="timerDisplay" class="font-bold">30s</span>
                        </div>
                        
                        <div id="playerBadge" class="flex items-center space-x-2 bg-gray-100 rounded-full px-3 py-1">
                            <span id="playerInitial" class="font-bold text-orange-500">U</span>
                            <span id="playerNameDisplay" class="hidden md:inline">User</span>
                        </div>
                    </div>
                </div>
                
                <!-- Progress bars -->
                <div class="max-w-6xl mx-auto mt-3">
                    <div class="flex space-x-2 items-center">
                        <div class="flex-1 bg-gray-200 rounded-full h-2">
                            <div id="quizProgress" class="bg-gradient-to-r from-orange-500 to-yellow-400 h-2 rounded-full" style="width: 0%"></div>
                        </div>
                        <div class="text-sm text-gray-600" id="progressText">0/50</div>
                    </div>
                    
                    <div class="mt-1 bg-gray-200 rounded-full h-1">
                        <div id="questionTimer" class="bg-blue-500 h-1 rounded-full" style="width: 100%"></div>
                    </div>
                </div>
            </header>
            
            <!-- Main Content -->
            <main class="flex-1 py-8 px-4 max-w-4xl mx-auto">
                <div id="questionCard" class="question-card bg-white rounded-xl shadow-md p-6">
                    <!-- Question content will be loaded here -->
                </div>
                
                <div id="feedbackContainer" class="mt-6 hidden">
                    <div id="feedbackMessage" class="text-center p-4 rounded-lg font-bold text-lg"></div>
                </div>
                
                <div class="mt-8 text-center">
                    <button id="nextButton" class="btn-primary text-white px-8 py-3 rounded-lg font-semibold hidden">
                        Lanjut <span class="material-icons align-middle ml-1">arrow_forward</span>
                    </button>
                </div>
            </main>
        </div>

        <!-- Results Screen -->
        <div id="resultsScreen" class="hidden min-h-screen bg-gradient-to-br from-orange-50 to-yellow-100 p-4">
            <div class="max-w-md mx-auto bg-white rounded-2xl shadow-xl overflow-hidden">
                <!-- Medal Section -->
                <div id="medalSection" class="text-center py-8 px-6 relative">
                    <div id="fireEffect" class="fire-effect hidden" style="top: 20%; left: 50%; transform: translateX(-50%);"></div>
                    <div id="medalIcon" class="text-8xl mb-4 inline-block">ð</div>
                    <h2 id="resultTitle" class="text-3xl font-bold mb-2">Selamat!</h2>
                    <p id="resultSubtitle" class="text-xl text-gray-600">Kamu mendapat medali emas!</p>
                </div>
                
                <!-- Stats Section -->
                <div class="bg-gray-50 p-6">
                    <h3 class="text-2xl font-bold text-center mb-6">Statistik Kamu</h3>
                    
                    <div class="grid grid-cols-2 gap-4 mb-6">
                        <div class="bg-white p-4 rounded-lg shadow-sm text-center">
                            <div id="finalScore" class="text-3xl font-bold text-orange-500">0</div>
                            <div class="text-gray-600">Total Poin</div>
                        </div>
                        
                        <div class="bg-white p-4 rounded-lg shadow-sm text-center">
                            <div id="correctCount" class="text-3xl font-bold text-green-500">0</div>
                            <div class="text-gray-600">â Benar</div>
                        </div>
                        
                        <div class="bg-white p-4 rounded-lg shadow-sm text-center">
                            <div id="incorrectCount" class="text-3xl font-bold text-red-500">0</div>
                            <div class="text-gray-600">â Salah</div>
                        </div>
                        
                        <div class="bg-white p-4 rounded-lg shadow-sm text-center">
                            <div id="timeTaken" class="text-3xl font-bold text-blue-500">0:00</div>
                            <div class="text-gray-600">â± Waktu</div>
                        </div>
                    </div>
                    
                    <!-- Action Buttons -->
                    <div class="space-y-3">
                        <button onclick="restartQuiz()" class="btn-primary text-white px-6 py-3 rounded-lg font-bold w-full flex items-center justify-center">
                            <span class="material-icons mr-2">replay</span> Main Lagi
                        </button>
                        
                        <button onclick="shareResults()" class="btn-secondary text-white px-6 py-3 rounded-lg font-bold w-full flex items-center justify-center">
                            <span class="material-icons mr-2">share</span> Bagikan Hasil
                        </button>
                        
                        <button onclick="showHome()" class="border border-orange-500 text-orange-500 px-6 py-3 rounded-lg font-bold w-full flex items-center justify-center hover:bg-orange-50 transition-colors">
                            <span class="material-icons mr-2">home</span> Kembali ke Beranda
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // ======================
        // QUIZ DATA - 50 SOAL OLIMPIADE IPS SMP (LEVEL HOST)
        // ======================
        const quizData = [
            // Bagian 1: Geografi (15 soal)
            {
                type: "mc",
                question: "Paparan Sunda adalah wilayah perairan dangkal yang menghubungkan pulau-pulau di Indonesia bagian barat dengan daratan Asia. Manakah dari berikut ini yang TIDAK termasuk dalam wilayah Paparan Sunda?",
                options: [
                    "Sumatera",
                    "Jawa",
                    "Kalimantan",
                    "Papua"
                ],
                correctAnswer: 3,
                points: 4,
                explanation: "Papua termasuk dalam Paparan Sahul yang menghubungkan dengan Australia, bukan Paparan Sunda."
            },
            {
                type: "mc",
                question: "Fenomena El NiÃ±o secara signifikan mempengaruhi iklim Indonesia dengan menyebabkan:",
                options: [
                    "Musim hujan yang lebih basah dari normal",
                    "Musim kemarau yang lebih kering dari normal",
                    "Peningkatan suhu permukaan laut di perairan Indonesia",
                    "Frekuensi angin topan yang lebih tinggi"
                ],
                correctAnswer: 1,
                points: 4,
                explanation: "El NiÃ±o menyebabkan musim kemarau lebih kering karena pergeseran pola sirkulasi atmosfer dan penurunan suhu permukaan laut di Indonesia."
            },
            {
                type: "fi",
                question: "Garis khayal yang membagi bumi menjadi belahan timur dan barat, dengan derajat 0Â° yang melalui Greenwich, Inggris, disebut garis...",
                correctAnswer: "BUJUR",
                points: 4,
                explanation: "Garis bujur (longitude) menentukan posisi timur-barat suatu tempat, dengan meridian utama 0Â° di Greenwich."
            },
            {
                type: "mc",
                question: "Manakah dari negara-negara ASEAN berikut yang memiliki sistem pemerintahan monarki absolut?",
                options: [
                    "Thailand",
                    "Malaysia",
                    "Brunei Darussalam",
                    "Kamboja"
                ],
                correctAnswer: 2,
                points: 4,
                explanation: "Brunei Darussalam adalah satu-satunya negara ASEAN dengan sistem monarki absolut yang masih berlaku penuh."
            },
            {
                type: "fi",
                question: "Laut yang terletak di antara Pulau Jawa dan Pulau Bali disebut Laut...",
                correctAnswer: "BALI",
                points: 3,
                explanation: "Laut Bali memisahkan Pulau Jawa dan Pulau Bali, dikenal dengan arus selatnya yang kuat."
            },
            {
                type: "mc",
                question: "Manakah dari berikut ini yang merupakan dampak positif dari letak geostrategis Indonesia?",
                options: [
                    "Menjadi jalur perdagangan internasional",
                    "Memiliki keanekaragaman budaya yang tinggi",
                    "Rentan terhadap bencana alam",
                    "Jawaban a dan b benar"
                ],
                correctAnswer: 3,
                points: 4,
                explanation: "Letak geostrategis Indonesia di antara dua benua dan dua samudera membuatnya menjadi jalur perdagangan penting dan memiliki keanekaragaman budaya."
            },
            {
                type: "mc",
                question: "Pulau manakah di Indonesia yang memiliki wilayah hutan hujan tropis terluas?",
                options: [
                    "Sumatera",
                    "Kalimantan",
                    "Sulawesi",
                    "Papua"
                ],
                correctAnswer: 3,
                points: 4,
                explanation: "Papua memiliki hutan hujan tropis terluas di Indonesia, mencakup sekitar 40% dari total hutan Indonesia."
            },
            {
                type: "fi",
                question: "Gunung api tertinggi di Indonesia yang juga merupakan gunung api aktif tertinggi di dunia adalah Gunung...",
                correctAnswer: "KERINCI",
                points: 4,
                explanation: "Gunung Kerinci di Sumatera memiliki ketinggian 3.805 mdpl dan merupakan gunung api aktif tertinggi di Indonesia dan dunia."
            },
            {
                type: "mc",
                question: "Manakah dari berikut ini yang BUKAN merupakan karakteristik iklim tropis seperti di Indonesia?",
                options: [
                    "Suhu rata-rata tahunan tinggi",
                    "Perbedaan suhu siang dan malam besar",
                    "Kelembaban udara tinggi",
                    "Curah hujan tahunan tinggi"
                ],
                correctAnswer: 1,
                points: 4,
                explanation: "Di iklim tropis, perbedaan suhu siang dan malam kecil karena kelembaban tinggi yang menahan panas."
            },
            {
                type: "mc",
                question: "Sungai terpanjang di Asia Tenggara yang melewati beberapa negara adalah:",
                options: [
                    "Sungai Mekong",
                    "Sungai Kapuas",
                    "Sungai Chao Phraya",
                    "Sungai Irrawaddy"
                ],
                correctAnswer: 0,
                points: 4,
                explanation: "Sungai Mekong (4.350 km) mengalir melalui China, Myanmar, Laos, Thailand, Kamboja, dan Vietnam."
            },
            {
                type: "fi",
                question: "Selat yang memisahkan Pulau Sumatera dan Singapura disebut Selat...",
                correctAnswer: "SINGAPURA",
                points: 3,
                explanation: "Selat Singapura menghubungkan Laut China Selatan dengan Selat Malaka, merupakan jalur pelayaran tersibuk di dunia."
            },
            {
                type: "mc",
                question: "Manakah dari berikut ini yang merupakan contoh adaptasi manusia terhadap kondisi geografis daerah pantai?",
                options: [
                    "Membangun rumah panggung",
                    "Mengembangkan sistem irigasi",
                    "Membuat terasering",
                    "Menanam tanaman xerofit"
                ],
                correctAnswer: 0,
                points: 4,
                explanation: "Rumah panggung adaptasi terhadap pasang surut dan banjir di daerah pantai."
            },
            {
                type: "mc",
                question: "Negara di Asia Tenggara yang tidak memiliki wilayah laut adalah:",
                options: [
                    "Laos",
                    "Myanmar",
                    "Thailand",
                    "Kamboja"
                ],
                correctAnswer: 0,
                points: 4,
                explanation: "Laos adalah satu-satunya negara ASEAN yang terkurung daratan (landlocked)."
            },
            {
                type: "fi",
                question: "Danau terbesar di Asia Tenggara yang terletak di Kamboja disebut Danau...",
                correctAnswer: "TONLE SAP",
                points: 4,
                explanation: "Danau TonlÃ© Sap adalah danau air tawar terbesar di Asia Tenggara dengan sistem ekologi unik yang mengembang dan menyusut musiman."
            },
            {
                type: "mc",
                question: "Manakah dari berikut ini yang BUKAN merupakan dampak negatif urbanisasi?",
                options: [
                    "Peningkatan produktivitas pertanian",
                    "Permukiman kumuh",
                    "Kemacetan lalu lintas",
                    "Pencemaran lingkungan"
                ],
                correctAnswer: 0,
                points: 4,
                explanation: "Urbanisasi justru menyebabkan penurunan produktivitas pertanian karena banyak tenaga kerja muda meninggalkan desa."
            },

            // Bagian 2: Sejarah (15 soal)
            {
                type: "mc",
                question: "Kerajaan Hindu-Buddha pertama di Indonesia yang meninggalkan bukti tertulis adalah:",
                options: [
                    "Kutai",
                    "Tarumanegara",
                    "Sriwijaya",
                    "Majapahit"
                ],
                correctAnswer: 0,
                points: 4,
                explanation: "Kerajaan Kutai di Kalimantan Timur meninggalkan prasasti Yupa (abad ke-4) sebagai bukti tertulis tertua."
            },
            {
                type: "fi",
                question: "Perjanjian yang mengakhiri Perang Diponegoro (1825-1830) disebut Perjanjian...",
                correctAnswer: "IMOGIRI",
                points: 4,
                explanation: "Perjanjian Imogiri tahun 1830 menandai akhir Perang Diponegoro dengan ditangkapnya Pangeran Diponegoro."
            },
            {
                type: "mc",
                question: "Tokoh yang dikenal sebagai Bapak Pendidikan Nasional Indonesia adalah:",
                options: [
                    "Ki Hajar Dewantara",
                    "Dewi Sartika",
                    "R.A. Kartini",
                    "K.H. Ahmad Dahlan"
                ],
                correctAnswer: 0,
                points: 4,
                explanation: "Ki Hajar Dewantara mendirikan Taman Siswa dan filosofi 'Tut Wuri Handayani' sebagai dasar pendidikan nasional."
            },
            {
                type: "mc",
                question: "Peristiwa Rengasdengklok terjadi karena:",
                options: [
                    "Perbedaan pendapat tentang waktu proklamasi",
                    "Pertentangan antara golongan tua dan muda",
                    "Kekhawatiran akan intervensi Jepang",
                    "Semua jawaban benar"
                ],
                correctAnswer: 3,
                points: 4,
                explanation: "Peristiwa Rengasdengklok mencakup semua faktor tersebut dalam konteks persiapan proklamasi kemerdekaan."
            },
            {
                type: "fi",
                question: "Organisasi pergerakan nasional pertama di Indonesia yang didirikan tahun 1908 adalah...",
                correctAnswer: "BUDI UTOMO",
                points: 4,
                explanation: "Budi Utomo didirikan 20 Mei 1908 oleh Dr. Sutomo dan rekan-rekan, diperingati sebagai Hari Kebangkitan Nasional."
            },
            {
                type: "mc",
                question: "Konferensi Asia Afrika tahun 1955 menghasilkan dokumen penting yang disebut:",
                options: [
                    "Dasasila Bandung",
                    "Piagam Jakarta",
                    "Perjanjian Renville",
                    "Linggarjati"
                ],
                correctAnswer: 0,
                points: 4,
                explanation: "Dasasila Bandung berisi prinsip-prinsip dasar hubungan internasional yang disepakati dalam KAA 1955."
            },
            {
                type: "mc",
                question: "Pemberontakan DI/TII di Jawa Barat dipimpin oleh:",
                options: [
                    "Kahar Muzakkar",
                    "Sekarmadji Maridjan Kartosuwiryo",
                    "Daud Beureueh",
                    "Amir Fatah"
                ],
                correctAnswer: 1,
                points: 4,
                explanation: "Kartosuwiryo memproklamasikan Negara Islam Indonesia/NII di Jawa Barat tahun 1949."
            },
            {
                type: "fi",
                question: "Perdana Menteri Indonesia pertama adalah...",
                correctAnswer: "SUTAN SYAHRIR",
                points: 4,
                explanation: "Sutan Syahrir menjabat sebagai Perdana Menteri pertama (14 November 1945 - 20 Juni 1947) dalam sistem parlementer."
            },
            {
                type: "mc",
                question: "Manakah dari berikut ini yang BUKAN merupakan isi Trilogi Van Deventer?",
                options: [
                    "Irigasi",
                    "Transmigrasi",
                    "Edukasi",
                    "Emigrasi"
                ],
                correctAnswer: 3,
                points: 4,
                explanation: "Trilogi Van Deventer meliputi Irigasi, Edukasi, dan Emigrasi (transmigrasi dalam konteks Hindia Belanda)."
            },
            {
                type: "mc",
                question: "Peristiwa Bandung Lautan Api terjadi dalam konteks:",
                options: [
                    "Perjuangan mempertahankan kemerdekaan dari Belanda",
                    "Pemberontakan PKI Madiun",
                    "Agresi Militer Belanda II",
                    "Konfrontasi dengan Malaysia"
                ],
                correctAnswer: 0,
                points: 4,
                explanation: "Peristiwa 24 Maret 1946 dimana rakyat Bandung membakar kota untuk mencegah digunakan Belanda."
            },
            {
                type: "fi",
                question: "Pahlawan nasional dari Aceh yang dijuluki 'Singa Aceh' adalah...",
                correctAnswer: "CUT NYAK DIEN",
                points: 4,
                explanation: "Cut Nyak Dien memimpin perlawanan terhadap Belanda setelah suaminya Teuku Umar gugur."
            },
            {
                type: "mc",
                question: "Pemerintah Darurat Republik Indonesia (PDRI) diproklamasikan di:",
                options: [
                    "Yogyakarta",
                    "Bukittinggi",
                    "Bireuen",
                    "Surakarta"
                ],
                correctAnswer: 1,
                points: 4,
                explanation: "PDRI dibentuk di Bukittinggi, Sumatera Barat setelah Yogyakarta jatuh dalam Agresi Militer Belanda II."
            },
            {
                type: "mc",
                question: "Manakah dari berikut ini yang BUKAN termasuk kebijakan ekonomi Orde Baru?",
                options: [
                    "Repelita",
                    "Dominggoes",
                    "Inpres",
                    "Rencana Pembangunan Lima Tahun"
                ],
                correctAnswer: 1,
                points: 4,
                explanation: "Dominggoes adalah kebijakan tanam paksa pada masa kolonial, bukan Orde Baru."
            },
            {
                type: "fi",
                question: "Perjanjian yang mengakhiri konfrontasi Indonesia-Malaysia disebut Perjanjian...",
                correctAnswer: "BANGKOK",
                points: 4,
                explanation: "Perjanjian Bangkok 11 Agustus 1966 mengakhiri konfrontasi dan memulihkan hubungan diplomatik."
            },
            {
                type: "mc",
                question: "Gerakan 30 September 1965 dikaitkan dengan organisasi:",
                options: [
                    "PKI",
                    "PETA",
                    "DI/TII",
                    "APRA"
                ],
                correctAnswer: 0,
                points: 4,
                explanation: "Gerakan 30 September 1965 dianggap sebagai upaya kudeta oleh PKI, meskipun masih menjadi kontroversi sejarah."
            },

            // Bagian 3: Ekonomi (10 soal)
            {
                type: "mc",
                question: "Manakah dari berikut ini yang BUKAN merupakan ciri sistem ekonomi pasar?",
                options: [
                    "Kepemilikan pribadi atas alat produksi",
                    "Harga ditentukan mekanisme pasar",
                    "Perencanaan ekonomi terpusat",
                    "Persaingan bebas antar produsen"
                ],
                correctAnswer: 2,
                points: 4,
                explanation: "Perencanaan ekonomi terpusat adalah ciri sistem ekonomi komando, bukan pasar."
            },
            {
                type: "fi",
                question: "Indeks yang mengukur ketimpangan pendapatan dalam suatu negara disebut indeks...",
                correctAnswer: "GINI",
                points: 4,
                explanation: "Indeks Gini mengukur distribusi pendapatan dengan skala 0 (setara sempurna) hingga 1 (ketimpangan sempurna)."
            },
            {
                type: "mc",
                question: "Manakah dari berikut ini yang merupakan contoh kebijakan moneter?",
                options: [
                    "Perubahan tarif pajak",
                    "Operasi pasar terbuka",
                    "Peningkatan belanja pemerintah",
                    "Pemberian subsidi"
                ],
                correctAnswer: 1,
                points: 4,
                explanation: "Operasi pasar terbuka (jual/beli surat berharga) adalah instrumen kebijakan moneter oleh bank sentral."
            },
            {
                type: "mc",
                question: "Krisis moneter 1997-1998 di Asia dimulai dari negara:",
                options: [
                    "Indonesia",
                    "Thailand",
                    "Korea Selatan",
                    "Malaysia"
                ],
                correctAnswer: 1,
                points: 4,
                explanation: "Krisis dimulai Juli 1997 saat Thailand terpaksa mengambangkan mata uang Baht setelah serangan spekulasi."
            },
            {
                type: "fi",
                question: "Organisasi negara-negara pengekspor minyak dunia disebut...",
                correctAnswer: "OPEC",
                points: 4,
                explanation: "OPEC (Organization of Petroleum Exporting Countries) didirikan 1960 untuk mengkoordinasikan kebijakan minyak."
            },
            {
                type: "mc",
                question: "Manakah dari berikut ini yang termasuk contoh investasi langsung (direct investment)?",
                options: [
                    "Membeli saham di bursa efek",
                    "Membangun pabrik di luar negeri",
                    "Menyimpan uang di bank",
                    "Membeli obligasi pemerintah"
                ],
                correctAnswer: 1,
                points: 4,
                explanation: "Investasi langsung melibatkan penguasaan aset produktif seperti pabrik, berbeda dengan investasi portofolio."
            },
            {
                type: "mc",
                question: "Kebijakan ekonomi yang diterapkan Orde Baru pada awal pemerintahan disebut:",
                options: [
                    "Gunting Syafruddin",
                    "Sanering",
                    "Gerakan Benteng",
                    "Stabilisasi dan Rehabilitasi"
                ],
                correctAnswer: 3,
                points: 4,
                explanation: "Kebijakan stabilisasi (pengendalian inflasi) dan rehabilitasi (pemulihan ekonomi) menjadi fokus awal Orde Baru."
            },
            {
                type: "fi",
                question: "Lembaga keuangan internasional yang memberikan pinjaman untuk pembangunan negara berkembang disebut...",
                correctAnswer: "WORLD BANK",
                points: 4,
                explanation: "World Bank (Bank Dunia) berfokus pada pinjaman pembangunan, berbeda dengan IMF yang fokus pada stabilitas moneter."
            },
            {
                type: "mc",
                question: "Manakah dari berikut ini yang BUKAN merupakan faktor produksi?",
                options: [
                    "Tanah",
                    "Modal",
                    "Kewirausahaan",
                    "Inflasi"
                ],
                correctAnswer: 3,
                points: 4,
                explanation: "Faktor produksi klasik meliputi tanah, tenaga kerja, modal, dan kewirausahaan. Inflasi adalah fenomena ekonomi makro."
            },
            {
                type: "mc",
                question: "Kegiatan ekonomi yang memanfaatkan sumber daya alam tanpa mengubah sifat fisiknya disebut:",
                options: [
                    "Ekstraktif",
                    "Agraris",
                    "Industri",
                    "Perdagangan"
                ],
                correctAnswer: 0,
                points: 4,
                explanation: "Kegiatan ekstraktif seperti pertambangan, penebangan kayu, atau penangkapan ikan mengambil langsung dari alam."
            },

            // Bagian 4: Sosiologi (10 soal)
            {
                type: "mc",
                question: "Proses belajar dan penyesuaian diri terhadap kebudayaan disebut:",
                options: [
                    "Sosialisasi",
                    "Enkulturasi",
                    "Akulturasi",
                    "Asimilasi"
                ],
                correctAnswer: 1,
                points: 4,
                explanation: "Enkulturasi adalah proses mempelajari dan menginternalisasi budaya sendiri, berbeda dengan sosialisasi yang lebih luas."
            },
            {
                type: "fi",
                question: "Perubahan sosial yang terjadi secara lambat dan bertahap disebut perubahan...",
                correctAnswer: "EVOLUSI",
                points: 4,
                explanation: "Perubahan evolusioner berlawanan dengan revolusioner yang cepat dan mendasar."
            },
            {
                type: "mc",
                question: "Manakah dari berikut ini yang merupakan contoh konflik vertikal?",
                options: [
                    "Buruh vs pengusaha",
                    "Suku A vs suku B",
                    "Partai X vs partai Y",
                    "Siswa vs guru"
                ],
                correctAnswer: 0,
                points: 4,
                explanation: "Konflik vertikal terjadi antara pihak dengan kekuatan/posisi tidak setara (atasan-bawahan, penguasa-rakyat)."
            },
            {
                type: "mc",
                question: "Lembaga sosial yang berfungsi mengatur hubungan kekerabatan adalah:",
                options: [
                    "Keluarga",
                    "Sekolah",
                    "Agama",
                    "Pemerintah"
                ],
                correctAnswer: 0,
                points: 4,
                explanation: "Keluarga sebagai lembaga primer mengatur hubungan kekerabatan dan pewarisan nilai-nilai."
            },
            {
                type: "fi",
                question: "Bentuk interaksi sosial dimana kedua belah pihak saling menguntungkan disebut...",
                correctAnswer: "KERJASAMA",
                points: 4,
                explanation: "Kerjasama (cooperation) adalah interaksi asosiatif dimana pihak-pihak bekerja sama mencapai tujuan bersama."
            },
            {
                type: "mc",
                question: "Manakah dari berikut ini yang BUKAN merupakan fungsi laten pendidikan?",
                options: [
                    "Transmisi kebudayaan",
                    "Pengurangan pengangguran",
                    "Penciptaan lapangan kerja",
                    "Pemilihan pasangan hidup"
                ],
                correctAnswer: 0,
                points: 4,
                explanation: "Transmisi kebudayaan adalah fungsi manifes (disengaja) pendidikan, bukan laten (tidak disengaja)."
            },
            {
                type: "mc",
                question: "Globalisasi dalam bidang budaya sering dikritik karena menyebabkan:",
                options: [
                    "Heterogenisasi budaya",
                    "Homogenisasi budaya",
                    "Disintegrasi sosial",
                    "Jawaban b dan c benar"
                ],
                correctAnswer: 3,
                points: 4,
                explanation: "Globalisasi dikritik menyebabkan homogenisasi (penyeragaman) budaya dan potensi disintegrasi sosial."
            },
            {
                type: "fi",
                question: "Proses masuknya unsur kebudayaan asing ke dalam kebudayaan lokal disebut...",
                correctAnswer: "AKULTURASI",
                points: 4,
                explanation: "Akulturasi adalah percampuran dua kebudayaan tanpa menghilangkan identitas budaya asli."
            },
            {
                type: "mc",
                question: "Manakah dari berikut ini yang merupakan contoh mobilitas sosial vertikal naik?",
                options: [
                    "Guru menjadi kepala sekolah",
                    "Pindah rumah ke kota lain",
                    "Pensiun dari pekerjaan",
                    "Beralih profesi tanpa perubahan status"
                ],
                correctAnswer: 0,
                points: 4,
                explanation: "Mobilitas vertikal naik berarti peningkatan status sosial, seperti promosi jabatan."
            },
            {
                type: "mc",
                question: "Lembaga yang berfungsi mengawasi pelaksanaan norma dalam masyarakat disebut:",
                options: [
                    "Lembaga politik",
                    "Lembaga hukum",
                    "Lembaga agama",
                    "Semua jawaban benar"
                ],
                correctAnswer: 3,
                points: 4,
                explanation: "Semua lembaga tersebut memiliki fungsi pengawasan norma sesuai bidangnya masing-masing."
            }
        ];

        // ======================
        // GAME STATE
        // ======================
        let currentQuestionIndex = 0;
        let score = 0;
        let correctAnswers = 0;
        let incorrectAnswers = 0;
        let timeLeft = 30;
        let timerInterval;
        let startTime;
        let playerName = "";
        let playerUsername = "";
        let timeBonus = 0;

        // ======================
        // DOM ELEMENTS
        // ======================
        const loginScreen = document.getElementById('loginScreen');
        const quizContainer = document.getElementById('quizContainer');
        const resultsScreen = document.getElementById('resultsScreen');
        const loginForm = document.getElementById('loginForm');
        const questionCard = document.getElementById('questionCard');
        const feedbackContainer = document.getElementById('feedbackContainer');
        const feedbackMessage = document.getElementById('feedbackMessage');
        const nextButton = document.getElementById('nextButton');
        const scoreDisplay = document.getElementById('scoreDisplay');
        const timerDisplay = document.getElementById('timerDisplay');
        const quizProgress = document.getElementById('quizProgress');
        const questionTimer = document.getElementById('questionTimer');
        const progressText = document.getElementById('progressText');
        const playerNameDisplay = document.getElementById('playerNameDisplay');
        const playerInitial = document.getElementById('playerInitial');
        const finalScore = document.getElementById('finalScore');
        const correctCount = document.getElementById('correctCount');
        const incorrectCount = document.getElementById('incorrectCount');
        const timeTaken = document.getElementById('timeTaken');
        const medalIcon = document.getElementById('medalIcon');
        const resultTitle = document.getElementById('resultTitle');
        const resultSubtitle = document.getElementById('resultSubtitle');
        const fireEffect = document.getElementById('fireEffect');

        // ======================
        // INITIALIZATION
        // ======================
        document.addEventListener('DOMContentLoaded', function() {
            // Setup event listeners
            loginForm.addEventListener('submit', handleLogin);
            nextButton.addEventListener('click', nextQuestion);
        });

        // ======================
        // FUNCTIONS
        // ======================
        function handleLogin(e) {
            e.preventDefault();
            
            const nameInput = document.getElementById('playerName');
            const usernameInput = document.getElementById('playerUsername');
            
            playerName = nameInput.value.trim();
            playerUsername = usernameInput.value.trim();
            
            // Validasi username
            const validUsernames = ['aa', 'bb', 'cc', 'dd', 'ee', 'ff', 'gg', 'hh', 'ii', 'jj'];
            if (!validUsernames.includes(playerUsername)) {
                Swal.fire({
                    title: 'Username Tidak Valid',
                    text: 'Silakan pilih username dari aa hingga jj',
                    icon: 'error',
                    confirmButtonText: 'OK'
                });
                return;
            }
            
            if (!playerName) {
                Swal.fire({
                    title: 'Nama Harus Diisi',
                    text: 'Silakan masukkan nama lengkap Anda',
                    icon: 'error',
                    confirmButtonText: 'OK'
                });
                return;
            }
            
            // Simpan data player
            playerNameDisplay.textContent = playerName;
            playerInitial.textContent = playerName.charAt(0).toUpperCase();
            
            // Tampilkan animasi loading
            Swal.fire({
                title: 'Memuat Quiz...',
                allowOutsideClick: false,
                didOpen: () => {
                    Swal.showLoading();
                }
            });
            
            // Pindah ke quiz setelah 1 detik (simulasi loading)
            setTimeout(() => {
                Swal.close();
                startQuiz();
            }, 1000);
        }
        
        function startQuiz() {
            loginScreen.classList.add('hidden');
            quizContainer.classList.remove('hidden');
            resultsScreen.classList.add('hidden');
            
            // Reset state
            currentQuestionIndex = 0;
            score = 0;
            correctAnswers = 0;
            incorrectAnswers = 0;
            timeBonus = 0;
            startTime = new Date();
            
            loadQuestion();
        }
        
        function loadQuestion() {
            const question = quizData[currentQuestionIndex];
            
            // Update UI
            scoreDisplay.textContent = score;
            progressText.textContent = `${currentQuestionIndex + 1}/${quizData.length}`;
            quizProgress.style.width = `${((currentQuestionIndex + 1) / quizData.length) * 100}%`;
            
            // Set timer berdasarkan jenis soal
            timeLeft = (question.type === 'mc' ? 30 : 45) + timeBonus;
            timeBonus = 0; // Reset bonus setelah digunakan
            updateTimerDisplay();
            
            // Start timer
            clearInterval(timerInterval);
            timerInterval = setInterval(updateTimer, 1000);
            
            // Bangun tampilan soal
            let questionHTML = `
                <div class="mb-6">
                    <div class="flex justify-between items-start">
                        <h3 class="text-xl font-semibold text-gray-800">${question.question}</h3>
                        <span class="bg-orange-500 text-white px-3 py-1 rounded-full text-sm font-semibold ml-4">
                            ${question.points} Poin
                        </span>
                    </div>
            `;
            
            if (question.type === 'mc') {
                questionHTML += '<div class="mt-6 space-y-3">';
                question.options.forEach((option, index) => {
                    questionHTML += `
                        <button onclick="selectAnswer(${index})" 
                                class="w-full text-left p-4 rounded-lg border border-gray-300 hover:border-orange-500 hover:bg-orange-50 transition-all">
                            <span class="font-bold text-orange-500">${String.fromCharCode(65 + index)}.</span> ${option}
                        </button>
                    `;
                });
                questionHTML += '</div>';
            } else {
                questionHTML += `
                    <div class="mt-6">
                        <input type="text" id="fillAnswer" 
                               class="w-full p-4 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-orange-500"
                               placeholder="Ketik jawaban dalam HURUF BESAR">
                        <button onclick="checkFillAnswer()" 
                                class="mt-4 btn-primary text-white px-6 py-3 rounded-lg font-semibold w-full">
                            Submit Jawaban
                        </button>
                    </div>
                `;
            }
            
            questionHTML += '</div>';
            questionCard.innerHTML = questionHTML;
            
            // Sembunyikan feedback dan next button
            feedbackContainer.classList.add('hidden');
            nextButton.classList.add('hidden');
        }
        
        function updateTimer() {
            timeLeft--;
            updateTimerDisplay();
            
            if (timeLeft <= 0) {
                clearInterval(timerInterval);
                handleTimeOut();
            } else if (timeLeft <= 5) {
                timerDisplay.classList.add('text-red-500', 'timer-danger');
            }
        }
        
        function updateTimerDisplay() {
            timerDisplay.textContent = `${timeLeft}s`;
            const totalTime = quizData[currentQuestionIndex].type === 'mc' ? 30 : 45;
            questionTimer.style.width = `${(timeLeft / totalTime) * 100}%`;
        }
        
        function selectAnswer(selectedIndex) {
            clearInterval(timerInterval);
            const question = quizData[currentQuestionIndex];
            const optionButtons = questionCard.querySelectorAll('button');
            
            // Nonaktifkan semua tombol
            optionButtons.forEach(btn => btn.disabled = true);
            
            // Tandai jawaban benar
            optionButtons[question.correctAnswer].classList.add('bg-green-100', 'border-green-500', 'correct-answer');
            
            if (selectedIndex === question.correctAnswer) {
                // Jawaban benar
                handleCorrectAnswer(question.points);
            } else {
                // Jawaban salah
                optionButtons[selectedIndex].classList.add('bg-red-100', 'border-red-500', 'incorrect-shake');
                handleIncorrectAnswer(question.options[question.correctAnswer]);
            }
        }
        
        function checkFillAnswer() {
            const input = document.getElementById('fillAnswer');
            const userAnswer = input.value.trim().toUpperCase();
            const question = quizData[currentQuestionIndex];
            
            if (!userAnswer) {
                Swal.fire({
                    title: 'Jawaban Kosong',
                    text: 'Silakan ketik jawaban Anda terlebih dahulu',
                    icon: 'warning',
                    confirmButtonText: 'OK'
                });
                return;
            }
            
            clearInterval(timerInterval);
            input.disabled = true;
            
            if (userAnswer === question.correctAnswer) {
                input.classList.add('bg-green-100', 'border-green-500', 'correct-answer');
                handleCorrectAnswer(question.points);
            } else {
                input.classList.add('bg-red-100', 'border-red-500', 'incorrect-shake');
                handleIncorrectAnswer(question.correctAnswer);
            }
        }
        
        function handleCorrectAnswer(points) {
            const question = quizData[currentQuestionIndex];
            
            // Hitung skor
            score += points;
            correctAnswers++;
            
            // Bonus waktu jika menjawab cepat
            const timeUsed = (question.type === 'mc' ? 30 : 45) - timeLeft;
            if (timeUsed < 10) {
                timeBonus = 5;
                showFeedback(`â Benar! +${points} poin<br><small>Bonus +5 detik untuk soal berikutnya!</small>`, 'success');
            } else {
                showFeedback(`â Benar! +${points} poin`, 'success');
            }
            
            // Update score display
            scoreDisplay.textContent = score;
            
            // Confetti effect
            createConfetti();
            
            // Tampilkan next button
            nextButton.classList.remove('hidden');
        }
        
        function handleIncorrectAnswer(correctAnswer) {
            const question = quizData[currentQuestionIndex];
            
            // Hitung skor (minus 1, minimal 0)
            score = Math.max(0, score - 1);
            incorrectAnswers++;
            
            // Tampilkan feedback
            showFeedback(`â Salah!<br><small>Jawaban benar: ${correctAnswer}</small>`, 'error');
            
            // Update score display
            scoreDisplay.textContent = score;
            
            // Tampilkan next button
            nextButton.classList.remove('hidden');
        }
        
        function handleTimeOut() {
            const question = quizData[currentQuestionIndex];
            
            // Hitung skor (minus 1, minimal 0)
            score = Math.max(0, score - 1);
            incorrectAnswers++;
            
            // Tampilkan feedback
            let correctAnswer = question.type === 'mc' ? question.options[question.correctAnswer] : question.correctAnswer;
            showFeedback(`â± Waktu habis!<br><small>Jawaban benar: ${correctAnswer}</small>`, 'warning');
            
            // Update score display
            scoreDisplay.textContent = score;
            
            // Tampilkan next button
            nextButton.classList.remove('hidden');
            
            // Nonaktifkan input/jawaban
            if (question.type === 'mc') {
                const optionButtons = questionCard.querySelectorAll('button');
                optionButtons.forEach(btn => btn.disabled = true);
                optionButtons[question.correctAnswer].classList.add('bg-green-100', 'border-green-500');
            } else {
                const input = document.getElementById('fillAnswer');
                if (input) input.disabled = true;
            }
        }
        
        function showFeedback(message, type) {
            feedbackMessage.innerHTML = message;
            
            // Set warna berdasarkan type
            feedbackContainer.className = 'mt-6 text-center p-4 rounded-lg font-bold text-lg';
            if (type === 'success') {
                feedbackContainer.classList.add('bg-green-100', 'text-green-700');
            } else if (type === 'error') {
                feedbackContainer.classList.add('bg-red-100', 'text-red-700');
            } else {
                feedbackContainer.classList.add('bg-yellow-100', 'text-yellow-700');
            }
            
            feedbackContainer.classList.remove('hidden');
        }
        
        function nextQuestion() {
            currentQuestionIndex++;
            
            // Reset timer styling
            timerDisplay.classList.remove('text-red-500', 'timer-danger');
            
            if (currentQuestionIndex < quizData.length) {
                loadQuestion();
            } else {
                showResults();
            }
        }
        
        function showResults() {
            quizContainer.classList.add('hidden');
            resultsScreen.classList.remove('hidden');
            
            // Hitung waktu yang digunakan
            const endTime = new Date();
            const totalSeconds = Math.floor((endTime - startTime) / 1000);
            const minutes = Math.floor(totalSeconds / 60);
            const seconds = totalSeconds % 60;
            
            // Tentukan medali berdasarkan skor
            let medal = 'ð¥';
            let title = 'Bagus!';
            let subtitle = 'Kamu mendapat medali perunggu!';
            
            if (score >= 160) { // 40% dari maksimal (400)
                medal = 'ð';
                title = 'Luar Biasa!';
                subtitle = 'Kamu mendapat medali emas!';
                medalIcon.classList.add('medal-glow');
                fireEffect.classList.remove('hidden');
            } else if (score >= 120) { // 30% dari maksimal
                medal = 'ð¥';
                title = 'Hebat!';
                subtitle = 'Kamu mendapat medali perak!';
                medalIcon.classList.add('medal-glow');
            } else {
                medalIcon.classList.remove('medal-glow');
                fireEffect.classList.add('hidden');
            }
            
            // Update UI
            medalIcon.textContent = medal;
            resultTitle.textContent = title;
            resultSubtitle.textContent = subtitle;
            finalScore.textContent = score;
            correctCount.textContent = correctAnswers;
            incorrectCount.textContent = incorrectAnswers;
            timeTaken.textContent = `${minutes}:${seconds.toString().padStart(2, '0')}`;
        }
        
        function createConfetti() {
            for (let i = 0; i < 20; i++) {
                setTimeout(() => {
                    const confetti = document.createElement('div');
                    confetti.className = 'confetti';
                    confetti.style.left = Math.random() * 100 + '%';
                    confetti.style.backgroundColor = ['#FF6B00', '#F4C425', '#4A90E2', '#10B981'][Math.floor(Math.random() * 4)];
                    document.body.appendChild(confetti);
                    
                    setTimeout(() => {
                        confetti.remove();
                    }, 2000);
                }, i * 100);
            }
        }
        
        function restartQuiz() {
            resultsScreen.classList.add('hidden');
            startQuiz();
        }
        
        function shareResults() {
            const shareText = `ðï¸ ${playerName} baru saja menyelesaikan Quiz OSN IPS di WUIZZIZZZ dengan skor ${score} poin!\n\nâ ${correctAnswers} benar | â ${incorrectAnswers} salah | â± ${timeTaken.textContent}\n\nAyo uji pengetahuanmu juga!`;
            
            if (navigator.share) {
                navigator.share({
                    title: 'Hasil Quiz WUIZZIZZZ',
                    text: shareText
                }).catch(err => {
                    console.log('Error sharing:', err);
                    copyToClipboard(shareText);
                });
            } else {
                copyToClipboard(shareText);
            }
        }
        
        function copyToClipboard(text) {
            navigator.clipboard.writeText(text).then(() => {
                Swal.fire({
                    title: 'Tersalin!',
                    text: 'Hasil quiz telah disalin ke clipboard',
                    icon: 'success',
                    timer: 2000
                });
            });
        }
        
        function showHome() {
            Swal.fire({
                title: 'Yakin ingin keluar?',
                text: 'Progress quiz saat ini akan hilang',
                icon: 'warning',
                showCancelButton: true,
                confirmButtonColor: '#3085d6',
                cancelButtonColor: '#d33',
                confirmButtonText: 'Ya, keluar',
                cancelButtonText: 'Batal'
            }).then((result) => {
                if (result.isConfirmed) {
                    quizContainer.classList.add('hidden');
                    resultsScreen.classList.add('hidden');
                    loginScreen.classList.remove('hidden');
                }
            });
        }

        // Expose functions to global scope for HTML onclick
        window.selectAnswer = selectAnswer;
        window.checkFillAnswer = checkFillAnswer;
        window.restartQuiz = restartQuiz;
        window.shareResults = shareResults;
        window.showHome = showHome;
    </script>
</body>
</html>
