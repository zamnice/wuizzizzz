<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>WUIZZIZZZ - Super Quiz Olimpiade Sains IPS SMP</title>
    <meta property="og:image" content="https://files.catbox.moe/j4r8jq.png">
    <link rel="icon" href="https://files.catbox.moe/j4r8jq.png">
    
    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;700&family=Comic+Neue:wght@400;700&display=swap" rel="stylesheet">
    
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    fontFamily: {
                        poppins: ['Poppins', 'sans-serif'],
                        playful: ['Comic Neue', 'cursive'],
                    },
                    animation: {
                        'pulse-fast': 'pulse 1s cubic-bezier(0.4, 0, 0.6, 1) infinite',
                        'bounce-fast': 'bounce 0.5s infinite',
                    }
                }
            }
        }
    </script>
    
    <!-- SweetAlert2 -->
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
    
    <!-- Google Icons -->
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
    
    <style>
        .btn-primary {
            background: linear-gradient(135deg, #FF6B00, #F4C425);
            transition: all 0.3s ease;
        }
        
        .btn-primary:hover {
            transform: scale(1.05);
            box-shadow: 0 10px 25px rgba(255, 107, 0, 0.3);
        }
        
        .btn-secondary {
            background: linear-gradient(135deg, #4A90E2, #10B981);
        }
        
        .btn-secondary:hover {
            transform: scale(1.05);
            box-shadow: 0 10px 15px rgba(74, 144, 226, 0.3);
        }
        
        .confetti {
            position: absolute;
            width: 10px;
            height: 10px;
            background: #FF6B00;
            animation: confetti-fall 2s ease-out forwards;
        }
        
        @keyframes confetti-fall {
            0% { transform: translateY(-100px) rotate(0deg); opacity: 1; }
            100% { transform: translateY(300px) rotate(360deg); opacity: 0; }
        }
        
        .fire-effect {
            position: absolute;
            width: 100px;
            height: 100px;
            background: radial-gradient(circle, rgba(255,200,0,0.8) 0%, rgba(255,100,0,0.5) 50%, rgba(255,50,0,0) 70%);
            border-radius: 50%;
            filter: blur(5px);
            animation: fire-flicker 1s ease-in-out infinite alternate;
        }
        
        @keyframes fire-flicker {
            0% { transform: scale(1); opacity: 0.8; }
            100% { transform: scale(1.1); opacity: 1; }
        }
        
        .medal-glow {
            animation: medal-glow 2s ease-in-out infinite alternate;
        }
        
        @keyframes medal-glow {
            0% { filter: drop-shadow(0 0 5px rgba(255, 215, 0, 0.7)); }
            100% { filter: drop-shadow(0 0 20px rgba(255, 215, 0, 0.9)); }
        }
        
        .question-card {
            transition: all 0.3s ease;
        }
        
        .question-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.1);
        }
        
        .correct-answer {
            animation: correct-pulse 0.5s ease-in-out;
        }
        
        @keyframes correct-pulse {
            0% { transform: scale(1); box-shadow: 0 0 0 rgba(16, 185, 129, 0); }
            50% { transform: scale(1.05); box-shadow: 0 0 20px rgba(16, 185, 129, 0.5); }
            100% { transform: scale(1); box-shadow: 0 0 0 rgba(16, 185, 129, 0); }
        }
        
        .incorrect-shake {
            animation: shake 0.5s ease-in-out;
        }
        
        @keyframes shake {
            0%, 100% { transform: translateX(0); }
            25% { transform: translateX(-5px); }
            75% { transform: translateX(5px); }
        }
        
        .timer-danger {
            animation: pulse-fast 1s infinite;
        }
    </style>
</head>
<body class="font-poppins min-h-screen bg-gray-50">
    <div id="app" class="min-h-screen flex flex-col">
        <!-- Login Screen -->
        <div id="loginScreen" class="min-h-screen flex items-center justify-center p-4 bg-gradient-to-br from-orange-50 to-yellow-100">
            <div class="bg-white rounded-2xl shadow-xl p-8 w-full max-w-md">
                <div class="text-center mb-8">
                    <div class="flex justify-center mb-4">
                        <div class="w-16 h-16 bg-gradient-to-r from-orange-500 to-yellow-400 rounded-full flex items-center justify-center">
                            <span class="text-white text-3xl font-bold">W</span>
                        </div>
                    </div>
                    <h1 class="text-4xl font-bold bg-gradient-to-r from-orange-500 to-yellow-400 bg-clip-text text-transparent mb-2">WUIZZIZZZ</h1>
                    <p class="text-gray-600">Siap hadapi Olimpiade Sains Nasional IPS? Uji kemampuanmu dengan 50 soal menantang ini!</p>
                </div>
                
                <form id="loginForm" class="space-y-4">
                    <div>
                        <label for="playerName" class="block text-gray-700 mb-2">Masukkan Nama kamu:</label>
                        <input type="text" id="playerName" required class="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-orange-500" placeholder="Contoh: ZAM ZAM">
                    </div>
                    
                    <div>
                        <label for="playerUsername" class="block text-gray-700 mb-2">Pilih Username kamu:</label>
                        <input type="text" id="playerUsername" required class="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-orange-500" placeholder="Masukkan username (aa-jj)">
                    </div>
                    
                    <button type="submit" class="btn-primary text-white px-6 py-3 rounded-lg font-bold w-full flex items-center justify-center">
                        <span class="material-icons mr-2">rocket_launch</span> Mulai Quiz
                    </button>
                            <footer class="w-full text-center text-gray-500 text-sm py-4 mt-8">
                            Â©2025 WUIZZIZZZ - Super Quiz Olimpiade IPS by <b>ZAM ZAM</b>
                            </footer>
                </form>
            </div>
        </div>

        <!-- Quiz Container -->
        <div id="quizContainer" class="hidden min-h-screen">
            <!-- Header -->
            <header class="bg-white shadow-md py-4 px-6">
                <div class="max-w-6xl mx-auto flex justify-between items-center">
                    <div class="flex items-center space-x-4">
                        <button onclick="showHome()" class="text-gray-600 hover:text-orange-500">
                            <span class="material-icons">home</span>
                        </button>
                        <div id="quizTitle" class="font-bold text-lg">WUIZZIZZ | SUPER QUIZ</div>
                    </div>
                    
                    <div class="flex items-center space-x-6">
                        <div class="flex items-center space-x-2">
                            <span class="material-icons text-orange-500">stars</span>
                            <span id="scoreDisplay" class="font-bold">0</span>
                        </div>
                        
                        <div class="flex items-center space-x-2">
                            <span class="material-icons text-blue-500">timer</span>
                            <span id="timerDisplay" class="font-bold">30s</span>
                        </div>
                        
                        <div id="playerBadge" class="flex items-center space-x-2 bg-gray-100 rounded-full px-3 py-1">
                            <span id="playerInitial" class="font-bold text-orange-500">U</span>
                            <span id="playerNameDisplay" class="hidden md:inline">User</span>
                        </div>
                    </div>
                </div>
                
                <!-- Progress bars -->
                <div class="max-w-6xl mx-auto mt-3">
                    <div class="flex space-x-2 items-center">
                        <div class="flex-1 bg-gray-200 rounded-full h-2">
                            <div id="quizProgress" class="bg-gradient-to-r from-orange-500 to-yellow-400 h-2 rounded-full" style="width: 0%"></div>
                        </div>
                        <div class="text-sm text-gray-600" id="progressText">0/50</div>
                    </div>
                    
                    <div class="mt-1 bg-gray-200 rounded-full h-1">
                        <div id="questionTimer" class="bg-blue-500 h-1 rounded-full" style="width: 100%"></div>
                    </div>
                </div>
            </header>
            
            <!-- Main Content -->
            <main class="flex-1 py-8 px-4 max-w-4xl mx-auto">
                <div id="questionCard" class="question-card bg-white rounded-xl shadow-md p-6">
                    <!-- Question content will be loaded here -->
                </div>
                
                <div id="feedbackContainer" class="mt-6 hidden">
                    <div id="feedbackMessage" class="text-center p-4 rounded-lg font-bold text-lg"></div>
                </div>
                
                <div class="mt-8 text-center">
                    <button id="nextButton" class="btn-primary text-white px-8 py-3 rounded-lg font-semibold hidden">
                        Lanjut <span class="material-icons align-middle ml-1">arrow_forward</span>
                    </button>
                </div>
            </main>
        </div>

        <!-- Results Screen -->
        <div id="resultsScreen" class="hidden min-h-screen bg-gradient-to-br from-orange-50 to-yellow-100 p-4">
            <div class="max-w-md mx-auto bg-white rounded-2xl shadow-xl overflow-hidden">
                <!-- Medal Section -->
                <div id="medalSection" class="text-center py-8 px-6 relative">
                    <div id="fireEffect" class="fire-effect hidden" style="top: 20%; left: 50%; transform: translateX(-50%);"></div>
                    <div id="medalIcon" class="text-8xl mb-4 inline-block">ð</div>
                    <h2 id="resultTitle" class="text-3xl font-bold mb-2">Selamat!</h2>
                    <p id="resultSubtitle" class="text-xl text-gray-600">Kamu mendapat medali emas!</p>
                </div>
                
                <!-- Stats Section -->
                <div class="bg-gray-50 p-6">
                    <h3 class="text-2xl font-bold text-center mb-6">Statistik Kamu</h3>
                    
                    <div class="grid grid-cols-2 gap-4 mb-6">
                        <div class="bg-white p-4 rounded-lg shadow-sm text-center">
                            <div id="finalScore" class="text-3xl font-bold text-orange-500">0</div>
                            <div class="text-gray-600">Total Poin</div>
                        </div>
                        
                        <div class="bg-white p-4 rounded-lg shadow-sm text-center">
                            <div id="correctCount" class="text-3xl font-bold text-green-500">0</div>
                            <div class="text-gray-600">â Benar</div>
                        </div>
                        
                        <div class="bg-white p-4 rounded-lg shadow-sm text-center">
                            <div id="incorrectCount" class="text-3xl font-bold text-red-500">0</div>
                            <div class="text-gray-600">â Salah</div>
                        </div>
                        
                        <div class="bg-white p-4 rounded-lg shadow-sm text-center">
                            <div id="timeTaken" class="text-3xl font-bold text-blue-500">0:00</div>
                            <div class="text-gray-600">â± Waktu</div>
                        </div>
                    </div>
                    
                    <!-- Action Buttons -->
                    <div class="space-y-3">
                        <button onclick="restartQuiz()" class="btn-primary text-white px-6 py-3 rounded-lg font-bold w-full flex items-center justify-center">
                            <span class="material-icons mr-2">replay</span> Main Lagi
                        </button>
                        
                        <button onclick="shareResults()" class="btn-secondary text-white px-6 py-3 rounded-lg font-bold w-full flex items-center justify-center">
                            <span class="material-icons mr-2">share</span> Bagikan Hasil
                        </button>
                        
                        <button onclick="showHome()" class="border border-orange-500 text-orange-500 px-6 py-3 rounded-lg font-bold w-full flex items-center justify-center hover:bg-orange-50 transition-colors">
                            <span class="material-icons mr-2">home</span> Kembali ke Beranda
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // ======================
        // QUIZ DATA - 50 SOAL OLIMPIADE IPS SMP (LEVEL HOST)
        // ======================
       const quizData = [
    {
      "type": "mc",
      "question": "Kebijakan quantitative easing oleh bank sentral terutama bertujuan untuk:",
      "options": [
        "Meningkatkan suku bunga acuan",
        "Memperketat persyaratan kredit",
        "Meningkatkan likuiditas pasar keuangan",
        "Menurunkan nilai tukar mata uang"
      ],
      "correctAnswer": 2,
      "explanation": "QE adalah pelonggaran moneter dengan membeli surat berharga untuk menyuntikkan uang ke sistem keuangan"
    },
    {
      "type": "mc",
      "question": "Pola permukiman linear di daerah pegunungan umumnya dipengaruhi oleh:",
      "options": [
        "Ketersediaan lahan datar",
        "Adanya jalur transportasi sungai",
        "Topografi lereng yang curam",
        "Distribusi sumber daya mineral"
      ],
      "correctAnswer": 2,
      "explanation": "Permukiman mengikuti kontur lereng untuk menghindari area yang terlalu terjal"
    },
    {
      "type": "mc",
      "question": "Dampak utama Revolusi Industri 4.0 terhadap ketenagakerjaan di Indonesia adalah:",
      "options": [
        "Meningkatnya permintaan tenaga kerja sektor jasa",
        "Berkurangnya lapangan kerja rutin yang terotomasi",
        "Penurunan kebutuhan keterampilan digital",
        "Stabilitas lapangan kerja manufaktur tradisional"
      ],
      "correctAnswer": 1,
      "explanation": "Otomasi dan AI menggantikan pekerjaan rutin, membutuhkan reskilling pekerja"
    },
    {
      "type": "mc",
      "question": "Teori pusat-pinggiran (core-periphery) dalam pembangunan wilayah dikemukakan oleh:",
      "options": [
        "Friedmann",
        "Weber",
        "Christaller",
        "Losch"
      ],
      "correctAnswer": 0,
      "explanation": "John Friedmann mengembangkan model ini untuk menjelaskan ketimpangan regional"
    },
    {
      "type": "mc",
      "question": "Faktor utama yang memicu krisis moneter 1998 di Indonesia adalah:",
      "options": [
        "Defisit fiskal yang besar",
        "Tingginya utang swasta dalam valas",
        "Kebijakan moneter yang terlalu ketat",
        "Penurunan ekspor migas"
      ],
      "correctAnswer": 1,
      "explanation": "Nilai tukar rupiah anjlok akibat ketidakmampuan membayar utang dollar AS"
    },
    {
      "type": "mc",
      "question": "Kebijakan proteksi tarif impor berdampak negatif pada:",
      "options": [
        "Produsen dalam negeri",
        "Konsumen domestik",
        "Eksportir manufaktur",
        "Investor asing langsung"
      ],
      "correctAnswer": 1,
      "explanation": "Harga barang impor lebih mahal mengurangi daya beli konsumen"
    },
    {
      "type": "mc",
      "question": "Pembentukan ASEAN Economic Community (AEC) bertujuan utama:",
      "options": [
        "Menciptakan pasar tunggal regional",
        "Membentuk aliansi militer",
        "Menyeragamkan sistem politik",
        "Mengontrol nilai tukar mata uang"
      ],
      "correctAnswer": 0,
      "explanation": "Integrasi ekonomi melalui free flow of goods, services, investment, and skilled labor"
    },
    {
      "type": "mc",
      "question": "Indikator utama dalam menghitung Indeks Pembangunan Manusia (IPM) adalah:",
      "options": [
        "Angka harapan hidup, pendidikan, pendapatan",
        "Tingkat urbanisasi, Gini ratio, PDB",
        "Konsumsi energi, melek huruf, inflasi",
        "Produktivitas tenaga kerja, ekspor, investasi"
      ],
      "correctAnswer": 0,
      "explanation": "IPM mengukur tiga dimensi dasar: kesehatan, pengetahuan, dan standar hidup layak"
    },
    {
      "type": "mc",
      "question": "Pengaruh letak geostrategis Indonesia terhadap ekonomi adalah:",
      "options": [
        "Menjadi pusat transit perdagangan global",
        "Meningkatkan isolasi ekonomi",
        "Memperkecil volume perdagangan maritim",
        "Mengurangi ketergantungan impor"
      ],
      "correctAnswer": 0,
      "explanation": "Posisi silang antara Samudera Hindia-Pasifik strategis untuk jalur pelayaran internasional"
    },
    {
      "type": "mc",
      "question": "Dampak negatif urbanisasi terhadap desa adalah:",
      "options": [
        "Meningkatnya alih fungsi lahan pertanian",
        "Berkurangnya tenaga kerja produktif",
        "Menurunnya harga tanah",
        "Meningkatnya produksi pangan"
      ],
      "correctAnswer": 1,
      "explanation": "Brain drain menyebabkan desa kehilangan SDM usia kerja"
    },
    {
      "type": "mc",
      "question": "Ciri utama masyarakat post-industrial adalah dominasi sektor:",
      "options": [
        "Pertanian",
        "Industri manufaktur",
        "Jasa berbasis pengetahuan",
        "Pertambangan"
      ],
      "correctAnswer": 2,
      "explanation": "Ekonomi berbasis informasi dan teknologi (knowledge-based economy)"
    },
    {
      "type": "mc",
      "question": "Tujuan utama kebijakan desentralisasi fiskal adalah:",
      "options": [
        "Memperkecil ketimpangan antar-daerah",
        "Memusatkan pembangunan di ibukota",
        "Mengurangi peran pemerintah daerah",
        "Menyeragamkan pendapatan per kapita"
      ],
      "correctAnswer": 0,
      "explanation": "Dana transfer ke daerah (DAU, DAK) untuk pemerataan pembangunan"
    },
    {
      "type": "mc",
      "question": "Fenomena bonus demografi terjadi ketika:",
      "options": [
        "Angka ketergantungan di bawah 50",
        "Proporsi lansia dominan",
        "Tingkat migrasi tinggi",
        "Angka mortalitas bayi meningkat"
      ],
      "correctAnswer": 0,
      "explanation": "Rasio penduduk usia produktif (15-64 tahun) lebih dari 66% total populasi"
    },
    {
      "type": "mc",
      "question": "Penyebab utama konflik agrarian di Indonesia adalah:",
      "options": [
        "Tumpang tindih klaim lahan",
        "Distribusi pupuk tidak merata",
        "Harga komoditas pertanian rendah",
        "Minimnya teknologi pertanian"
      ],
      "correctAnswer": 0,
      "explanation": "Konflik antara masyarakat, perusahaan, dan negara atas penguasaan tanah"
    },
    {
      "type": "mc",
      "question": "Dampak positif perdagangan bebas ASEAN-China adalah:",
      "options": [
        "Meningkatnya daya saing produk lokal",
        "Alih teknologi dari negara maju",
        "Penurunan harga barang konsumen",
        "Proteksi industri dalam negeri"
      ],
      "correctAnswer": 2,
      "explanation": "Harga produk impor lebih murah meningkatkan kesejahteraan konsumen"
    },
    {
      "type": "mc",
      "question": "Faktor penghambat pembangunan ekonomi di negara berkembang adalah:",
      "options": [
        "Kualitas SDM rendah",
        "Stabilitas politik tinggi",
        "Infrastruktur memadai",
        "Akses teknologi mudah"
      ],
      "correctAnswer": 0,
      "explanation": "Pendidikan dan kesehatan yang buruk mengurangi produktivitas tenaga kerja"
    },
    {
      "type": "mc",
      "question": "Kebijakan fiskal ekspansif ditandai dengan:",
      "options": [
        "Penurunan belanja pemerintah",
        "Peningkatan pajak penghasilan",
        "Pembangunan infrastruktur masif",
        "Pengetatan moneter"
      ],
      "correctAnswer": 2,
      "explanation": "Stimulus fiskal melalui proyek infrastruktur untuk dorong pertumbuhan ekonomi"
    },
    {
      "type": "mc",
      "question": "Pengaruh perubahan iklim terhadap sektor pertanian Indonesia adalah:",
      "options": [
        "Perubahan pola tanam",
        "Stabilitas produksi pangan",
        "Penurunan hama penyakit",
        "Pengurangan kebutuhan irigasi"
      ],
      "correctAnswer": 0,
      "explanation": "Anomali cuaca mengganggu kalender musim tanam tradisional"
    },
    {
      "type": "mc",
      "question": "Tujuan utama pembentukan poros maritim dunia oleh Indonesia adalah:",
      "options": [
        "Menguasai perdagangan global",
        "Memaksimalkan pemanfaatan sumber daya laut",
        "Membatasi jalur pelayaran asing",
        "Mengurangi ketergantungan pada impor"
      ],
      "correctAnswer": 1,
      "explanation": "Optimalisasi potensi kelautan seluas 3,25 juta km2 ZEE Indonesia"
    },
    {
      "type": "mc",
      "question": "Indikator keberhasilan pembangunan berkelanjutan adalah:",
      "options": [
        "Pertumbuhan PDB tinggi",
        "Keseimbangan ekologi-ekonomi-sosial",
        "Eksploitasi SDA maksimal",
        "Urbanisasi cepat"
      ],
      "correctAnswer": 1,
      "explanation": "Konsep triple bottom line: profit, people, planet"
    }
  ];
                
        // ======================
        // GAME STATE
        // ======================
        let currentQuestionIndex = 0;
        let score = 0;
        let correctAnswers = 0;
        let incorrectAnswers = 0;
        let timeLeft = 30;
        let timerInterval;
        let startTime;
        let playerName = "";
        let playerUsername = "";
        let timeBonus = 0;

        // ======================
        // DOM ELEMENTS
        // ======================
        const loginScreen = document.getElementById('loginScreen');
        const quizContainer = document.getElementById('quizContainer');
        const resultsScreen = document.getElementById('resultsScreen');
        const loginForm = document.getElementById('loginForm');
        const questionCard = document.getElementById('questionCard');
        const feedbackContainer = document.getElementById('feedbackContainer');
        const feedbackMessage = document.getElementById('feedbackMessage');
        const nextButton = document.getElementById('nextButton');
        const scoreDisplay = document.getElementById('scoreDisplay');
        const timerDisplay = document.getElementById('timerDisplay');
        const quizProgress = document.getElementById('quizProgress');
        const questionTimer = document.getElementById('questionTimer');
        const progressText = document.getElementById('progressText');
        const playerNameDisplay = document.getElementById('playerNameDisplay');
        const playerInitial = document.getElementById('playerInitial');
        const finalScore = document.getElementById('finalScore');
        const correctCount = document.getElementById('correctCount');
        const incorrectCount = document.getElementById('incorrectCount');
        const timeTaken = document.getElementById('timeTaken');
        const medalIcon = document.getElementById('medalIcon');
        const resultTitle = document.getElementById('resultTitle');
        const resultSubtitle = document.getElementById('resultSubtitle');
        const fireEffect = document.getElementById('fireEffect');

        // ======================
        // INITIALIZATION
        // ======================
        document.addEventListener('DOMContentLoaded', function() {
            // Setup event listeners
            loginForm.addEventListener('submit', handleLogin);
            nextButton.addEventListener('click', nextQuestion);
        });

        // ======================
        // FUNCTIONS
        // ======================
        function handleLogin(e) {
            e.preventDefault();
            
            const nameInput = document.getElementById('playerName');
            const usernameInput = document.getElementById('playerUsername');
            
            playerName = nameInput.value.trim();
            playerUsername = usernameInput.value.trim();
            
            // Validasi username
            const validUsernames = ['aa', 'bb', 'cc', 'dd', 'ee', 'ff', 'gg', 'hh', 'ii', 'jj'];
            if (!validUsernames.includes(playerUsername)) {
                Swal.fire({
                    title: 'Username Tidak Valid',
                    text: 'Silakan pilih username dari aa hingga jj',
                    icon: 'error',
                    confirmButtonText: 'OK'
                });
                return;
            }
            
            if (!playerName) {
                Swal.fire({
                    title: 'Nama Harus Diisi',
                    text: 'Silakan masukkan nama lengkap Anda',
                    icon: 'error',
                    confirmButtonText: 'OK'
                });
                return;
            }
            
            // Simpan data player
            playerNameDisplay.textContent = playerName;
            playerInitial.textContent = playerName.charAt(0).toUpperCase();
            
            // Tampilkan animasi loading
            Swal.fire({
                title: 'Memuat Quiz...',
                allowOutsideClick: false,
                didOpen: () => {
                    Swal.showLoading();
                }
            });
            
            // Pindah ke quiz setelah 1 detik (simulasi loading)
            setTimeout(() => {
                Swal.close();
                startQuiz();
            }, 1000);
        }
        
        function startQuiz() {
            loginScreen.classList.add('hidden');
            quizContainer.classList.remove('hidden');
            resultsScreen.classList.add('hidden');
            
            // Reset state
            currentQuestionIndex = 0;
            score = 0;
            correctAnswers = 0;
            incorrectAnswers = 0;
            timeBonus = 0;
            startTime = new Date();
            
            loadQuestion();
        }
        
        function loadQuestion() {
            const question = quizData[currentQuestionIndex];
            
            // Update UI
            scoreDisplay.textContent = score;
            progressText.textContent = `${currentQuestionIndex + 1}/${quizData.length}`;
            quizProgress.style.width = `${((currentQuestionIndex + 1) / quizData.length) * 100}%`;
            
            // Set timer berdasarkan jenis soal
            timeLeft = (question.type === 'mc' ? 30 : 45) + timeBonus;
            timeBonus = 0; // Reset bonus setelah digunakan
            updateTimerDisplay();
            
            // Start timer
            clearInterval(timerInterval);
            timerInterval = setInterval(updateTimer, 1000);
            
            // Bangun tampilan soal
            let questionHTML = `
                <div class="mb-6">
                    <div class="flex justify-between items-start">
                        <h3 class="text-xl font-semibold text-gray-800">${question.question}</h3>
                        <span class="bg-orange-500 text-white px-3 py-1 rounded-full text-sm font-semibold ml-4">
                            ${question.points} Poin
                        </span>
                    </div>
            `;
            
            if (question.type === 'mc') {
                questionHTML += '<div class="mt-6 space-y-3">';
                question.options.forEach((option, index) => {
                    questionHTML += `
                        <button onclick="selectAnswer(${index})" 
                                class="w-full text-left p-4 rounded-lg border border-gray-300 hover:border-orange-500 hover:bg-orange-50 transition-all">
                            <span class="font-bold text-orange-500">${String.fromCharCode(65 + index)}.</span> ${option}
                        </button>
                    `;
                });
                questionHTML += '</div>';
            } else {
                questionHTML += `
                    <div class="mt-6">
                        <input type="text" id="fillAnswer" 
                               class="w-full p-4 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-orange-500"
                               placeholder="Ketik jawaban dalam HURUF BESAR">
                        <button onclick="checkFillAnswer()" 
                                class="mt-4 btn-primary text-white px-6 py-3 rounded-lg font-semibold w-full">
                            Submit Jawaban
                        </button>
                    </div>
                `;
            }
            
            questionHTML += '</div>';
            questionCard.innerHTML = questionHTML;
            
            // Sembunyikan feedback dan next button
            feedbackContainer.classList.add('hidden');
            nextButton.classList.add('hidden');
        }
        
        function updateTimer() {
            timeLeft--;
            updateTimerDisplay();
            
            if (timeLeft <= 0) {
                clearInterval(timerInterval);
                handleTimeOut();
            } else if (timeLeft <= 5) {
                timerDisplay.classList.add('text-red-500', 'timer-danger');
            }
        }
        
        function updateTimerDisplay() {
            timerDisplay.textContent = `${timeLeft}s`;
            const totalTime = quizData[currentQuestionIndex].type === 'mc' ? 30 : 45;
            questionTimer.style.width = `${(timeLeft / totalTime) * 100}%`;
        }
        
        function selectAnswer(selectedIndex) {
            clearInterval(timerInterval);
            const question = quizData[currentQuestionIndex];
            const optionButtons = questionCard.querySelectorAll('button');
            
            // Nonaktifkan semua tombol
            optionButtons.forEach(btn => btn.disabled = true);
            
            // Tandai jawaban benar
            optionButtons[question.correctAnswer].classList.add('bg-green-100', 'border-green-500', 'correct-answer');
            
            if (selectedIndex === question.correctAnswer) {
                // Jawaban benar
                handleCorrectAnswer(question.points);
            } else {
                // Jawaban salah
                optionButtons[selectedIndex].classList.add('bg-red-100', 'border-red-500', 'incorrect-shake');
                handleIncorrectAnswer(question.options[question.correctAnswer]);
            }
        }
        
        function checkFillAnswer() {
            const input = document.getElementById('fillAnswer');
            const userAnswer = input.value.trim().toUpperCase();
            const question = quizData[currentQuestionIndex];
            
            if (!userAnswer) {
                Swal.fire({
                    title: 'Jawaban Kosong',
                    text: 'Silakan ketik jawaban Anda terlebih dahulu',
                    icon: 'warning',
                    confirmButtonText: 'OK'
                });
                return;
            }
            
            clearInterval(timerInterval);
            input.disabled = true;
            
            if (userAnswer === question.correctAnswer) {
                input.classList.add('bg-green-100', 'border-green-500', 'correct-answer');
                handleCorrectAnswer(question.points);
            } else {
                input.classList.add('bg-red-100', 'border-red-500', 'incorrect-shake');
                handleIncorrectAnswer(question.correctAnswer);
            }
        }
        
        function handleCorrectAnswer(points) {
            const question = quizData[currentQuestionIndex];
            
            // Hitung skor
            score += points;
            correctAnswers++;
            
            // Bonus waktu jika menjawab cepat
            const timeUsed = (question.type === 'mc' ? 30 : 45) - timeLeft;
            if (timeUsed < 10) {
                timeBonus = 5;
                showFeedback(`â Benar! +${points} poin<br><small>Bonus +5 detik untuk soal berikutnya!</small>`, 'success');
            } else {
                showFeedback(`â Benar! +${points} poin`, 'success');
            }
            
            // Update score display
            scoreDisplay.textContent = score;
            
            // Confetti effect
            createConfetti();
            
            // Tampilkan next button
            nextButton.classList.remove('hidden');
        }
        
        function handleIncorrectAnswer(correctAnswer) {
            const question = quizData[currentQuestionIndex];
            
            // Hitung skor (minus 1, minimal 0)
            score = Math.max(0, score - 1);
            incorrectAnswers++;
            
            // Tampilkan feedback
            showFeedback(`â Salah!<br><small>Jawaban benar: ${correctAnswer}</small>`, 'error');
            
            // Update score display
            scoreDisplay.textContent = score;
            
            // Tampilkan next button
            nextButton.classList.remove('hidden');
        }
        
        function handleTimeOut() {
            const question = quizData[currentQuestionIndex];
            
            // Hitung skor (minus 1, minimal 0)
            score = Math.max(0, score - 1);
            incorrectAnswers++;
            
            // Tampilkan feedback
            let correctAnswer = question.type === 'mc' ? question.options[question.correctAnswer] : question.correctAnswer;
            showFeedback(`â± Waktu habis!<br><small>Jawaban benar: ${correctAnswer}</small>`, 'warning');
            
            // Update score display
            scoreDisplay.textContent = score;
            
            // Tampilkan next button
            nextButton.classList.remove('hidden');
            
            // Nonaktifkan input/jawaban
            if (question.type === 'mc') {
                const optionButtons = questionCard.querySelectorAll('button');
                optionButtons.forEach(btn => btn.disabled = true);
                optionButtons[question.correctAnswer].classList.add('bg-green-100', 'border-green-500');
            } else {
                const input = document.getElementById('fillAnswer');
                if (input) input.disabled = true;
            }
        }
        
        function showFeedback(message, type) {
            feedbackMessage.innerHTML = message;
            
            // Set warna berdasarkan type
            feedbackContainer.className = 'mt-6 text-center p-4 rounded-lg font-bold text-lg';
            if (type === 'success') {
                feedbackContainer.classList.add('bg-green-100', 'text-green-700');
            } else if (type === 'error') {
                feedbackContainer.classList.add('bg-red-100', 'text-red-700');
            } else {
                feedbackContainer.classList.add('bg-yellow-100', 'text-yellow-700');
            }
            
            feedbackContainer.classList.remove('hidden');
        }
        
        function nextQuestion() {
            currentQuestionIndex++;
            
            // Reset timer styling
            timerDisplay.classList.remove('text-red-500', 'timer-danger');
            
            if (currentQuestionIndex < quizData.length) {
                loadQuestion();
            } else {
                showResults();
            }
        }
        
        function showResults() {
            quizContainer.classList.add('hidden');
            resultsScreen.classList.remove('hidden');
            
            // Hitung waktu yang digunakan
            const endTime = new Date();
            const totalSeconds = Math.floor((endTime - startTime) / 1000);
            const minutes = Math.floor(totalSeconds / 60);
            const seconds = totalSeconds % 60;
            
            // Tentukan medali berdasarkan skor
            let medal = 'ð¥';
            let title = 'Bagus!';
            let subtitle = 'Kamu mendapat medali perunggu!';
            
            if (score >= 80) { // 40% dari maksimal (400)
                medal = 'ð';
                title = 'Luar Biasa!';
                subtitle = 'Kamu mendapat medali emas!';
                medalIcon.classList.add('medal-glow');
                fireEffect.classList.remove('hidden');
            } else if (score >= 50) { // 30% dari maksimal
                medal = 'ð¥';
                title = 'Hebat!';
                subtitle = 'Kamu mendapat medali perak!';
                medalIcon.classList.add('medal-glow');
            } else {
                medalIcon.classList.remove('medal-glow');
                fireEffect.classList.add('hidden');
            }
            
            // Update UI
            medalIcon.textContent = medal;
            resultTitle.textContent = title;
            resultSubtitle.textContent = subtitle;
            finalScore.textContent = score;
            correctCount.textContent = correctAnswers;
            incorrectCount.textContent = incorrectAnswers;
            timeTaken.textContent = `${minutes}:${seconds.toString().padStart(2, '0')}`;
        }
        
        function createConfetti() {
            for (let i = 0; i < 20; i++) {
                setTimeout(() => {
                    const confetti = document.createElement('div');
                    confetti.className = 'confetti';
                    confetti.style.left = Math.random() * 100 + '%';
                    confetti.style.backgroundColor = ['#FF6B00', '#F4C425', '#4A90E2', '#10B981'][Math.floor(Math.random() * 4)];
                    document.body.appendChild(confetti);
                    
                    setTimeout(() => {
                        confetti.remove();
                    }, 2000);
                }, i * 100);
            }
        }
        
        function restartQuiz() {
            resultsScreen.classList.add('hidden');
            startQuiz();
        }
        
        function shareResults() {
            const shareText = `ðï¸ ${playerName} baru saja menyelesaikan Quiz OSN IPS di WUIZZIZZZ dengan skor ${score} poin!\n\nâ ${correctAnswers} benar | â ${incorrectAnswers} salah | â± ${timeTaken.textContent}\n\nAyo uji pengetahuanmu juga!`;
            
            if (navigator.share) {
                navigator.share({
                    title: 'Hasil Quiz WUIZZIZZZ',
                    text: shareText
                }).catch(err => {
                    console.log('Error sharing:', err);
                    copyToClipboard(shareText);
                });
            } else {
                copyToClipboard(shareText);
            }
        }
        
        function copyToClipboard(text) {
            navigator.clipboard.writeText(text).then(() => {
                Swal.fire({
                    title: 'Tersalin!',
                    text: 'Hasil quiz telah disalin ke clipboard',
                    icon: 'success',
                    timer: 2000
                });
            });
        }
        
        function showHome() {
            Swal.fire({
                title: 'Yakin ingin keluar?',
                text: 'Progress quiz saat ini akan hilang',
                icon: 'warning',
                showCancelButton: true,
                confirmButtonColor: '#3085d6',
                cancelButtonColor: '#d33',
                confirmButtonText: 'Ya, keluar',
                cancelButtonText: 'Batal'
            }).then((result) => {
                if (result.isConfirmed) {
                    quizContainer.classList.add('hidden');
                    resultsScreen.classList.add('hidden');
                    loginScreen.classList.remove('hidden');
                }
            });
        }

        // Expose functions to global scope for HTML onclick
        window.selectAnswer = selectAnswer;
        window.checkFillAnswer = checkFillAnswer;
        window.restartQuiz = restartQuiz;
        window.shareResults = shareResults;
        window.showHome = showHome;
    </script>
</body>
</html>
