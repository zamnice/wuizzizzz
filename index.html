<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>WUIZZIZZZ - OSN IPS</title>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;700&display=swap" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
    <style>
        body {
            font-family: 'Poppins', sans-serif;
            background: linear-gradient(135deg, #ff6b00, #f4c425);
            min-height: 100vh;
            margin: 0;
            padding: 0;
            overflow-x: hidden;
        }
        .dark-mode {
            background: linear-gradient(135deg, #333, #555);
            color: #fff;
        }
        .screen {
            display: none;
            width: 100%;
            min-height: 100vh;
            padding: 1rem;
            box-sizing: border-box;
        }
        .screen.active {
            display: block;
        }
        .btn {
            transition: all 0.3s ease;
        }
        .btn:hover {
            transform: scale(1.05);
        }
        .option {
            transition: all 0.3s ease;
            cursor: pointer;
        }
        .option:hover {
            transform: scale(1.02);
        }
        .correct {
            background-color: #4CAF50 !important;
            color: white !important;
            animation: correct 0.5s ease;
        }
        .wrong {
            background-color: #F44336 !important;
            color: white !important;
            animation: wrong 0.5s ease;
        }
        @keyframes correct {
            0% { transform: scale(1); }
            50% { transform: scale(1.05); }
            100% { transform: scale(1); }
        }
        @keyframes wrong {
            0% { transform: translateX(0); }
            25% { transform: translateX(-5px); }
            50% { transform: translateX(5px); }
            75% { transform: translateX(-5px); }
            100% { transform: translateX(0); }
        }
        .pulse {
            animation: pulse 1s infinite;
        }
        @keyframes pulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.1); }
            100% { transform: scale(1); }
        }
        .dark-mode-toggle {
            position: fixed;
            top: 20px;
            right: 20px;
            z-index: 1000;
            background: rgba(255, 255, 255, 0.2);
            border: none;
            width: 40px;
            height: 40px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            color: white;
            font-size: 1.2rem;
        }
        #homeScreen {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            text-align: center;
            padding: 2rem;
        }
        .logo {
            font-size: 3rem;
            font-weight: 700;
            color: white;
            margin-bottom: 0.5rem;
        }
        .welcome-text {
            background: rgba(255, 255, 255, 0.9);
            border-radius: 1rem;
            padding: 1.5rem;
            max-width: 600px;
            margin: 1rem 0;
            text-align: left;
        }
        .start-btn {
            background: linear-gradient(135deg, #ff6b00, #f4c425);
            color: white;
            font-size: 1.2rem;
            padding: 1rem 2rem;
            border-radius: 50px;
            border: none;
            cursor: pointer;
            margin: 1rem 0;
        }
        #quizScreen {
            max-width: 800px;
            margin: 0 auto;
            padding-top: 3rem;
        }
        .nav-card {
            background: rgba(255, 255, 255, 0.9);
            border-radius: 1rem;
            padding: 1rem;
            margin-bottom: 1rem;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        .question-card {
            background: rgba(255, 255, 255, 0.9);
            border-radius: 1rem;
            padding: 1.5rem;
        }
        .options {
            display: grid;
            gap: 0.75rem;
            margin-top: 1.5rem;
        }
        .option {
            background: #f4c425;
            color: #333;
            padding: 1rem;
            border-radius: 0.5rem;
            text-align: left;
        }
        .true-false-container {
            display: flex;
            justify-content: space-between;
            margin-top: 1rem;
        }
        .true-false-option {
            width: 48%;
            padding: 1rem;
            border-radius: 0.5rem;
            text-align: center;
        }
        #countdownScreen {
            display: flex;
            justify-content: center;
            align-items: center;
            background: rgba(0, 0, 0, 0.8);
        }
        .countdown-number {
            font-size: 8rem;
            color: white;
            font-weight: bold;
        }
        @media (max-width: 768px) {
            .logo {
                font-size: 2rem;
            }
            .welcome-text {
                padding: 1rem;
            }
            .options {
                grid-template-columns: 1fr;
            }
            .true-false-container {
                flex-direction: column;
            }
            .true-false-option {
                width: 100%;
                margin-bottom: 0.5rem;
            }
        }
        @media (min-width: 769px) {
            .options {
                grid-template-columns: 1fr 1fr;
            }
        }
    </style>
</head>
<body>
    <div class="dark-mode-toggle" onclick="toggleDarkMode()">üåô</div>

    <!-- Home Screen -->
    <div id="homeScreen" class="screen active">
        <div class="logo">WUIZZIZZZ</div>
        <div class="welcome-text">
            <h2 style="text-align: center; color: #ff6b00;">üéØ Siap Jadi Juara OSN IPS? üèÜ</h2>
            <p>Halo para calon juara! Selamat datang di WUIZZIZZZ, tempat terbaik untuk berlatih soal-soal Olimpiade IPS. Kamu akan menghadapi 50 soal yang menantang dan seru. Setiap soal punya waktu 30 detik, jadi pastikan kamu fokus dan percaya diri!</p>
            <p><strong>üí° Tips:</strong> Baca soal dengan teliti, jangan terburu-buru, dan ingat - setiap kesalahan adalah pembelajaran!</p>
            <p><strong>üî• Power-up:</strong> Dapatkan +10 detik bonus jika menjawab dalam 10 detik pertama!</p>
        </div>
        <button class="start-btn" onclick="startCountdown()">üöÄ MULAI KUIS</button>
    </div>

    <!-- Countdown Screen -->
    <div id="countdownScreen" class="screen">
        <div class="countdown-number">3</div>
    </div>

    <!-- Quiz Screen -->
    <div id="quizScreen" class="screen">
        <div class="nav-card">
            <div class="score">Skor: 0</div>
            <div class="powerup hidden pulse">üî•</div>
            <div class="timer">30 detik</div>
        </div>
        <div class="question-card">
            <div class="question-number"></div>
            <div class="question-text"></div>
            <div class="options"></div>
            <div class="short-answer hidden">
                <input type="text" placeholder="Masukkan jawaban (HURUF BESAR)">
                <button class="btn" onclick="checkShortAnswer()">Kirim</button>
            </div>
            <div class="true-false hidden">
                <div class="true-false-container">
                    <div class="true-false-option option" onclick="checkTrueFalse('A')"></div>
                    <div class="true-false-option option" onclick="checkTrueFalse('B')"></div>
                </div>
            </div>
        </div>
    </div>

    <!-- Result Screen -->
    <div id="resultScreen" class="screen">
        <div style="max-width: 800px; margin: 2rem auto; background: white; padding: 2rem; border-radius: 1rem;">
            <h2 style="color: #ff6b00;">Hasil Kuis</h2>
            <p id="total-score"></p>
            <p id="correct-answers"></p>
            <p id="time-taken"></p>
            <div class="redemption hidden">
                <h3>Redemption Quiz</h3>
                <p>Pilih hingga 3 soal yang salah/tidak dijawab untuk dijawab ulang:</p>
                <div id="redemption-options"></div>
                <button class="btn" onclick="startRedemption()">Mulai Redemption</button>
            </div>
            <div style="display: flex; gap: 1rem; justify-content: center; margin-top: 2rem;">
                <button class="btn" onclick="playAgain()">Main Lagi</button>
                <button class="btn" onclick="shareScore()">Bagikan Skor</button>
            </div>
            <div class="leaderboard" style="margin-top: 2rem;">
                <h3>Leaderboard</h3>
                <ul id="leaderboard-list"></ul>
            </div>
        </div>
    </div>

    <script>
        const questions = [
            // 25 Pilihan Ganda
            {
                type: "multiple",
                text: "Luas laut Indonesia mencakup 2/3 dari seluruh luas wilayah Indonesia dan memiliki garis pantai terpanjang kedua di dunia. Salah satu potensi sumber daya air laut adalah pemanfaatannya untuk pembuatan garam. Secara geografis, wilayah yang paling berpotensi untuk mendukung kegiatan tersebut adalah pesisir ....",
                options: ["Utara Papua", "Timur Kalimantan", "Selatan Sulawesi", "Barat Sumatera"],
                correct: "C"
            },
            {
                type: "multiple",
                text: "Interaksi lempeng tektonik Indo-Australia dan Eurasia menghasilkan zona subduksi yang memengaruhi aktivitas vulkanik di Indonesia. Fenomena ini paling dominan di wilayah ....",
                options: ["Cincin Api Pasifik", "Dataran Sunda", "Lempeng Sahul", "Pegunungan Himalaya"],
                correct: "A"
            },
            // Tambahkan 23 soal pilihan ganda lainnya...
            
            // 10 Isian Singkat
            {
                type: "short",
                text: "Persebaran flora dan fauna di Indonesia dipengaruhi oleh sejarah geologis pada masa zaman es. Dataran Sunda bersatu dengan Asia, sedangkan Dataran .... menyatu dengan Australia.",
                correct: "SAHUL"
            },
            {
                type: "short",
                text: "Kerajaan Islam pertama di Indonesia yang menjadi pusat pendidikan agama pada abad ke-16 adalah ....",
                correct: "DEMAK"
            },
            // Tambahkan 8 soal isian singkat lainnya...
            
            // 5 Benar/Salah
            {
                type: "truefalse",
                text: "Pilihlah pernyataan yang BENAR:",
                options: [
                    "Sistem tanam paksa diterapkan oleh pemerintah kolonial Belanda",
                    "Sistem tanam paksa menguntungkan petani Indonesia"
                ],
                correct: "A"
            },
            {
                type: "truefalse",
                text: "Pilihlah pernyataan yang SALAH:",
                options: [
                    "Kerajaan Sriwijaya menguasai perdagangan di Selat Malaka",
                    "Kerajaan Sriwijaya merupakan kerajaan Hindu pertama di Indonesia"
                ],
                correct: "B"
            }
            // Tambahkan 3 soal benar/salah lainnya...
        ];

        let currentQuestion = 0;
        let score = 0;
        let correctAnswers = 0;
        let startTime = null;
        let timerInterval = null;
        let timeLeft = 30;
        let answers = [];
        let redemptionQuestions = [];

        function showScreen(screenId) {
            document.querySelectorAll('.screen').forEach(screen => {
                screen.classList.remove('active');
            });
            document.getElementById(screenId).classList.add('active');
        }

        function startCountdown() {
            showScreen('countdownScreen');
            const countdownElement = document.querySelector('.countdown-number');
            let count = 3;
            
            const countdownInterval = setInterval(() => {
                countdownElement.textContent = count;
                count--;
                
                if (count < 0) {
                    clearInterval(countdownInterval);
                    startQuiz();
                }
            }, 1000);
        }

        function startQuiz() {
            showScreen('quizScreen');
            startTime = new Date();
            answers = Array(questions.length).fill(null);
            currentQuestion = 0;
            score = 0;
            correctAnswers = 0;
            loadQuestion();
        }

        function loadQuestion() {
            const q = questions[currentQuestion];
            timeLeft = 30;
            document.querySelector('.question-number').textContent = `Soal ${currentQuestion + 1}/${questions.length}`;
            document.querySelector('.question-text').textContent = q.text;
            document.querySelector('.score').textContent = `Skor: ${score}`;
            document.querySelector('.powerup').classList.add('hidden');

            const optionsDiv = document.querySelector('.options');
            const shortAnswerDiv = document.querySelector('.short-answer');
            const trueFalseDiv = document.querySelector('.true-false');
            
            optionsDiv.innerHTML = '';
            shortAnswerDiv.classList.add('hidden');
            trueFalseDiv.classList.add('hidden');

            if (q.type === "multiple") {
                optionsDiv.classList.remove('hidden');
                q.options.forEach((option, i) => {
                    const btn = document.createElement('div');
                    btn.classList.add('option');
                    btn.textContent = `${String.fromCharCode(65 + i)}. ${option}`;
                    btn.onclick = () => checkAnswer(String.fromCharCode(65 + i));
                    optionsDiv.appendChild(btn);
                });
            } else if (q.type === "short") {
                shortAnswerDiv.classList.remove('hidden');
                shortAnswerDiv.querySelector('input').value = '';
                shortAnswerDiv.querySelector('input').disabled = false;
            } else if (q.type === "truefalse") {
                trueFalseDiv.classList.remove('hidden');
                const options = trueFalseDiv.querySelectorAll('.true-false-option');
                options[0].textContent = `A. ${q.options[0]}`;
                options[1].textContent = `B. ${q.options[1]}`;
            }

            startTimer();
        }

        function startTimer() {
            clearInterval(timerInterval);
            document.querySelector('.timer').textContent = `${timeLeft} detik`;

            timerInterval = setInterval(() => {
                timeLeft--;
                document.querySelector('.timer').textContent = `${timeLeft} detik`;

                if (timeLeft <= 0) {
                    clearInterval(timerInterval);
                    if (questions[currentQuestion].type === "short") {
                        checkShortAnswer();
                    } else {
                        checkAnswer(null);
                    }
                }
            }, 1000);
        }

        function checkAnswer(answer) {
            clearInterval(timerInterval);
            const q = questions[currentQuestion];
            let isCorrect = false;

            if (q.type === "multiple") {
                const options = document.querySelectorAll('.option');
                options.forEach((opt, i) => {
                    if (String.fromCharCode(65 + i) === q.correct) {
                        opt.classList.add('correct');
                    } else if (String.fromCharCode(65 + i) === answer) {
                        opt.classList.add('wrong');
                    }
                    opt.onclick = null;
                });
                isCorrect = answer === q.correct;
            } else if (q.type === "truefalse") {
                const options = document.querySelectorAll('.true-false-option');
                options[0].classList.toggle('correct', q.correct === "A");
                options[1].classList.toggle('correct', q.correct === "B");
                if (answer) {
                    options[answer === "A" ? 0 : 1].classList.add('wrong');
                }
                isCorrect = answer === q.correct;
            }

            answers[currentQuestion] = { answer, isCorrect };

            if (isCorrect) {
                score += 10;
                correctAnswers++;
                if (timeLeft > 20) {
                    timeLeft += 10;
                    document.querySelector('.powerup').classList.remove('hidden');
                    document.querySelector('.timer').textContent = `${timeLeft} detik`;
                }
            }

            setTimeout(() => {
                currentQuestion++;
                if (currentQuestion < questions.length) {
                    loadQuestion();
                } else {
                    showResult();
                }
            }, 1000);
        }

        function checkShortAnswer() {
            const answer = document.querySelector('.short-answer input').value.toUpperCase().trim();
            const q = questions[currentQuestion];
            const isCorrect = answer === q.correct;
            
            document.querySelector('.short-answer input').disabled = true;
            document.querySelector('.short-answer input').style.backgroundColor = isCorrect ? '#4CAF50' : '#F44336';
            document.querySelector('.short-answer input').style.color = 'white';
            
            answers[currentQuestion] = { answer, isCorrect };

            if (isCorrect) {
                score += 10;
                correctAnswers++;
                if (timeLeft > 20) {
                    timeLeft += 10;
                    document.querySelector('.powerup').classList.remove('hidden');
                    document.querySelector('.timer').textContent = `${timeLeft} detik`;
                }
            }

            setTimeout(() => {
                currentQuestion++;
                if (currentQuestion < questions.length) {
                    loadQuestion();
                } else {
                    showResult();
                }
            }, 1000);
        }

        function checkTrueFalse(answer) {
            checkAnswer(answer);
        }

        function showResult() {
            showScreen('resultScreen');
            const timeTaken = Math.floor((new Date() - startTime) / 1000);
            document.getElementById('total-score').textContent = `Skor Total: ${score}`;
            document.getElementById('correct-answers').textContent = `Jawaban Benar: ${correctAnswers}/${questions.length}`;
            document.getElementById('time-taken').textContent = `Waktu: ${Math.floor(timeTaken / 60)} menit ${timeTaken % 60} detik`;

            const incorrectQuestions = answers
                .map((ans, i) => ({ index: i, isCorrect: ans ? ans.isCorrect : false }))
                .filter(ans => !ans.isCorrect)
                .map(ans => ans.index);

            if (incorrectQuestions.length > 0) {
                document.querySelector('.redemption').classList.remove('hidden');
                const redemptionOptions = document.getElementById('redemption-options');
                redemptionOptions.innerHTML = '';
                incorrectQuestions.forEach(i => {
                    const btn = document.createElement('button');
                    btn.classList.add('btn');
                    btn.textContent = `Soal ${i + 1}`;
                    btn.onclick = () => toggleRedemptionQuestion(i);
                    redemptionOptions.appendChild(btn);
                });
            }

            updateLeaderboard();
        }

        function toggleRedemptionQuestion(index) {
            const btn = document.querySelector(`#redemption-options button:nth-child(${index + 1})`);
            if (redemptionQuestions.includes(index)) {
                redemptionQuestions = redemptionQuestions.filter(i => i !== index);
                btn.classList.remove('selected');
            } else if (redemptionQuestions.length < 3) {
                redemptionQuestions.push(index);
                btn.classList.add('selected');
            }
        }

        function startRedemption() {
            if (redemptionQuestions.length === 0) {
                alert('Silakan pilih minimal satu soal untuk redemption quiz!');
                return;
            }
            currentQuestion = redemptionQuestions[0];
            redemptionQuestions = redemptionQuestions.slice(1);
            showScreen('quizScreen');
            loadQuestion();
        }

        function updateLeaderboard() {
            const leaderboard = JSON.parse(localStorage.getItem('leaderboard') || '[]');
            const name = prompt('Masukkan nama Anda untuk leaderboard:');
            if (name) {
                leaderboard.push({ 
                    name, 
                    score, 
                    time: Math.floor((new Date() - startTime) / 1000) 
                });
                leaderboard.sort((a, b) => b.score - a.score || a.time - b.time);
                localStorage.setItem('leaderboard', JSON.stringify(leaderboard.slice(0, 5)));
                
                const list = document.getElementById('leaderboard-list');
                list.innerHTML = '';
                leaderboard.slice(0, 5).forEach((entry, i) => {
                    const li = document.createElement('li');
                    li.textContent = `${i + 1}. ${entry.name}: ${entry.score} (${Math.floor(entry.time / 60)}m ${entry.time % 60}s)`;
                    list.appendChild(li);
                });
            }
        }

        function playAgain() {
            showScreen('homeScreen');
        }

        function shareScore() {
            alert('Fitur bagikan skor akan datang!');
        }

        function toggleDarkMode() {
            document.body.classList.toggle('dark-mode');
        }
    </script>
</body>
</html>
