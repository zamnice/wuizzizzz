<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>WUIZZIZZZ - Super Quiz Olimpiade Sains IPS SMP</title>
    <meta property="og:image" content="https://files.catbox.moe/j4r8jq.png">
    <link rel="icon" href="https://files.catbox.moe/j4r8jq.png">
    
    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;700&family=Comic+Neue:wght@400;700&display=swap" rel="stylesheet">
    
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    fontFamily: {
                        poppins: ['Poppins', 'sans-serif'],
                        playful: ['Comic Neue', 'cursive'],
                    },
                    animation: {
                        'pulse-fast': 'pulse 1s cubic-bezier(0.4, 0, 0.6, 1) infinite',
                        'bounce-fast': 'bounce 0.5s infinite',
                    }
                }
            }
        }
    </script>
    
    <!-- SweetAlert2 -->
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
    
    <!-- Google Icons -->
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
    
    <style>
        .btn-primary {
            background: linear-gradient(135deg, #FF6B00, #F4C425);
            transition: all 0.3s ease;
        }
        
        .btn-primary:hover {
            transform: scale(1.05);
            box-shadow: 0 10px 25px rgba(255, 107, 0, 0.3);
        }
        
        .btn-secondary {
            background: linear-gradient(135deg, #4A90E2, #10B981);
        }
        
        .btn-secondary:hover {
            transform: scale(1.05);
            box-shadow: 0 10px 15px rgba(74, 144, 226, 0.3);
        }
        
        .confetti {
            position: absolute;
            width: 10px;
            height: 10px;
            background: #FF6B00;
            animation: confetti-fall 2s ease-out forwards;
        }
        
        @keyframes confetti-fall {
            0% { transform: translateY(-100px) rotate(0deg); opacity: 1; }
            100% { transform: translateY(300px) rotate(360deg); opacity: 0; }
        }
        
        .fire-effect {
            position: absolute;
            width: 100px;
            height: 100px;
            background: radial-gradient(circle, rgba(255,200,0,0.8) 0%, rgba(255,100,0,0.5) 50%, rgba(255,50,0,0) 70%);
            border-radius: 50%;
            filter: blur(5px);
            animation: fire-flicker 1s ease-in-out infinite alternate;
        }
        
        @keyframes fire-flicker {
            0% { transform: scale(1); opacity: 0.8; }
            100% { transform: scale(1.1); opacity: 1; }
        }
        
        .medal-glow {
            animation: medal-glow 2s ease-in-out infinite alternate;
        }
        
        @keyframes medal-glow {
            0% { filter: drop-shadow(0 0 5px rgba(255, 215, 0, 0.7)); }
            100% { filter: drop-shadow(0 0 20px rgba(255, 215, 0, 0.9)); }
        }
        
        .question-card {
            transition: all 0.3s ease;
        }
        
        .question-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.1);
        }
        
        .correct-answer {
            animation: correct-pulse 0.5s ease-in-out;
        }
        
        @keyframes correct-pulse {
            0% { transform: scale(1); box-shadow: 0 0 0 rgba(16, 185, 129, 0); }
            50% { transform: scale(1.05); box-shadow: 0 0 20px rgba(16, 185, 129, 0.5); }
            100% { transform: scale(1); box-shadow: 0 0 0 rgba(16, 185, 129, 0); }
        }
        
        .incorrect-shake {
            animation: shake 0.5s ease-in-out;
        }
        
        @keyframes shake {
            0%, 100% { transform: translateX(0); }
            25% { transform: translateX(-5px); }
            75% { transform: translateX(5px); }
        }
        
        .timer-danger {
            animation: pulse-fast 1s infinite;
        }
    </style>
</head>
<body class="font-poppins min-h-screen bg-gray-50">
    <div id="app" class="min-h-screen flex flex-col">
        <!-- Login Screen -->
        <div id="loginScreen" class="min-h-screen flex items-center justify-center p-4 bg-gradient-to-br from-orange-50 to-yellow-100">
            <div class="bg-white rounded-2xl shadow-xl p-8 w-full max-w-md">
                <div class="text-center mb-8">
                    <div class="flex justify-center mb-4">
                        <div class="w-16 h-16 bg-gradient-to-r from-orange-500 to-yellow-400 rounded-full flex items-center justify-center">
                            <span class="text-white text-3xl font-bold">W</span>
                        </div>
                    </div>
                    <h1 class="text-4xl font-bold bg-gradient-to-r from-orange-500 to-yellow-400 bg-clip-text text-transparent mb-2">WUIZZIZZZ</h1>
                    <p class="text-gray-600">Siap hadapi Olimpiade Sains Nasional IPS? Uji kemampuanmu dengan 50 soal menantang ini!</p>
                </div>
                
                <form id="loginForm" class="space-y-4">
                    <div>
                        <label for="playerName" class="block text-gray-700 mb-2">Masukkan Nama kamu:</label>
                        <input type="text" id="playerName" required class="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-orange-500" placeholder="Contoh: ZAM ZAM">
                    </div>
                    
                    <div>
                        <label for="playerUsername" class="block text-gray-700 mb-2">Pilih Username kamu:</label>
                        <input type="text" id="playerUsername" required class="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-orange-500" placeholder="Masukkan username (aa-jj)">
                    </div>
                    
                    <button type="submit" class="btn-primary text-white px-6 py-3 rounded-lg font-bold w-full flex items-center justify-center">
                        <span class="material-icons mr-2">rocket_launch</span> Mulai Quiz
                    </button>
                            <footer class="w-full text-center text-gray-500 text-sm py-4 mt-8">
                            Â©2025 WUIZZIZZZ - Super Quiz Olimpiade IPS by <b>ZAM ZAM</b>
                            </footer>
                </form>
            </div>
        </div>

        <!-- Quiz Container -->
        <div id="quizContainer" class="hidden min-h-screen">
            <!-- Header -->
            <header class="bg-white shadow-md py-4 px-6">
                <div class="max-w-6xl mx-auto flex justify-between items-center">
                    <div class="flex items-center space-x-4">
                        <button onclick="showHome()" class="text-gray-600 hover:text-orange-500">
                            <span class="material-icons">home</span>
                        </button>
                        <div id="quizTitle" class="font-bold text-lg">WUIZZIZZ | SUPER QUIZ</div>
                    </div>
                    
                    <div class="flex items-center space-x-6">
                        <div class="flex items-center space-x-2">
                            <span class="material-icons text-orange-500">stars</span>
                            <span id="scoreDisplay" class="font-bold">0</span>
                        </div>
                        
                        <div class="flex items-center space-x-2">
                            <span class="material-icons text-blue-500">timer</span>
                            <span id="timerDisplay" class="font-bold">30s</span>
                        </div>
                        
                        <div id="playerBadge" class="flex items-center space-x-2 bg-gray-100 rounded-full px-3 py-1">
                            <span id="playerInitial" class="font-bold text-orange-500">U</span>
                            <span id="playerNameDisplay" class="hidden md:inline">User</span>
                        </div>
                    </div>
                </div>
                
                <!-- Progress bars -->
                <div class="max-w-6xl mx-auto mt-3">
                    <div class="flex space-x-2 items-center">
                        <div class="flex-1 bg-gray-200 rounded-full h-2">
                            <div id="quizProgress" class="bg-gradient-to-r from-orange-500 to-yellow-400 h-2 rounded-full" style="width: 0%"></div>
                        </div>
                        <div class="text-sm text-gray-600" id="progressText">0/50</div>
                    </div>
                    
                    <div class="mt-1 bg-gray-200 rounded-full h-1">
                        <div id="questionTimer" class="bg-blue-500 h-1 rounded-full" style="width: 100%"></div>
                    </div>
                </div>
            </header>
            
            <!-- Main Content -->
            <main class="flex-1 py-8 px-4 max-w-4xl mx-auto">
                <div id="questionCard" class="question-card bg-white rounded-xl shadow-md p-6">
                    <!-- Question content will be loaded here -->
                </div>
                
                <div id="feedbackContainer" class="mt-6 hidden">
                    <div id="feedbackMessage" class="text-center p-4 rounded-lg font-bold text-lg"></div>
                </div>
                
                <div class="mt-8 text-center">
                    <button id="nextButton" class="btn-primary text-white px-8 py-3 rounded-lg font-semibold hidden">
                        Lanjut <span class="material-icons align-middle ml-1">arrow_forward</span>
                    </button>
                </div>
            </main>
        </div>

        <!-- Results Screen -->
        <div id="resultsScreen" class="hidden min-h-screen bg-gradient-to-br from-orange-50 to-yellow-100 p-4">
            <div class="max-w-md mx-auto bg-white rounded-2xl shadow-xl overflow-hidden">
                <!-- Medal Section -->
                <div id="medalSection" class="text-center py-8 px-6 relative">
                    <div id="fireEffect" class="fire-effect hidden" style="top: 20%; left: 50%; transform: translateX(-50%);"></div>
                    <div id="medalIcon" class="text-8xl mb-4 inline-block">ð</div>
                    <h2 id="resultTitle" class="text-3xl font-bold mb-2">Selamat!</h2>
                    <p id="resultSubtitle" class="text-xl text-gray-600">Kamu mendapat medali emas!</p>
                </div>
                
                <!-- Stats Section -->
                <div class="bg-gray-50 p-6">
                    <h3 class="text-2xl font-bold text-center mb-6">Statistik Kamu</h3>
                    
                    <div class="grid grid-cols-2 gap-4 mb-6">
                        <div class="bg-white p-4 rounded-lg shadow-sm text-center">
                            <div id="finalScore" class="text-3xl font-bold text-orange-500">0</div>
                            <div class="text-gray-600">Total Poin</div>
                        </div>
                        
                        <div class="bg-white p-4 rounded-lg shadow-sm text-center">
                            <div id="correctCount" class="text-3xl font-bold text-green-500">0</div>
                            <div class="text-gray-600">â Benar</div>
                        </div>
                        
                        <div class="bg-white p-4 rounded-lg shadow-sm text-center">
                            <div id="incorrectCount" class="text-3xl font-bold text-red-500">0</div>
                            <div class="text-gray-600">â Salah</div>
                        </div>
                        
                        <div class="bg-white p-4 rounded-lg shadow-sm text-center">
                            <div id="timeTaken" class="text-3xl font-bold text-blue-500">0:00</div>
                            <div class="text-gray-600">â± Waktu</div>
                        </div>
                    </div>
                    
                    <!-- Action Buttons -->
                    <div class="space-y-3">
                        <button onclick="restartQuiz()" class="btn-primary text-white px-6 py-3 rounded-lg font-bold w-full flex items-center justify-center">
                            <span class="material-icons mr-2">replay</span> Main Lagi
                        </button>
                        
                        <button onclick="shareResults()" class="btn-secondary text-white px-6 py-3 rounded-lg font-bold w-full flex items-center justify-center">
                            <span class="material-icons mr-2">share</span> Bagikan Hasil
                        </button>
                        
                        <button onclick="showHome()" class="border border-orange-500 text-orange-500 px-6 py-3 rounded-lg font-bold w-full flex items-center justify-center hover:bg-orange-50 transition-colors">
                            <span class="material-icons mr-2">home</span> Kembali ke Beranda
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // ======================
        // QUIZ DATA - 50 SOAL OLIMPIADE IPS SMP (LEVEL HOST)
        // ======================
        const quizQuestions = [
            [
      {
        "type": "mc",
        "question": "Analisislah dampak dari letak astronomis Indonesia terhadap pola musim: Mengapa Indonesia mengalami iklim tropis dengan dua musim utama?",
        "options": [
            "Karena berada di garis khatulistiwa, menyebabkan curah hujan tinggi sepanjang tahun",
            "Karena pengaruh angin muson, yang berganti arah setiap enam bulan",
            "Karena letak lintang rendah, menghasilkan suhu tinggi dan evaporasi cepat",
            "Karena interaksi antara Samudra Hindia dan Pasifik, memicu siklon tropis"
        ],
        "correctAnswer": 1,
        "points": 4,
        "explanation": "Angin muson berganti arah karena perbedaan tekanan udara antara benua dan samudra, menyebabkan musim hujan dan kemarau di Indonesia."
    },
    {
        "type": "mc",
        "question": "Evaluasilah kebijakan transmigrasi di Indonesia: Apa alasan utama kegagalan program ini di beberapa daerah?",
        "options": [
            "Kurangnya infrastruktur pendukung di daerah tujuan",
            "Konflik budaya antara pendatang dan penduduk lokal",
            "Kurangnya adaptasi terhadap kondisi tanah yang berbeda",
            "Semua jawaban di atas benar"
        ],
        "correctAnswer": 3,
        "points": 3,
        "explanation": "Transmigrasi sering gagal karena kombinasi faktor infrastruktur, budaya, dan adaptasi lingkungan."
    },
    {
        "type": "mc",
        "question": "Sintesislah hubungan antara keragaman suku bangsa di Indonesia dengan potensi konflik horizontal: Bagaimana globalisasi mempengaruhi hal ini?",
        "options": [
            "Globalisasi meningkatkan toleransi melalui pertukaran budaya",
            "Globalisasi memperburuk konflik karena penyebaran informasi palsu",
            "Globalisasi netral, konflik lebih dipengaruhi faktor ekonomi",
            "Globalisasi mengurangi konflik dengan meningkatkan kesadaran hak asasi manusia"
        ],
        "correctAnswer": 1,
        "points": 4,
        "explanation": "Globalisasi dapat memperburuk konflik melalui media sosial yang menyebarkan hoaks dan provokasi."
    },
    {
        "type": "mc",
        "question": "Analisislah peran Sungai Mekong dalam perekonomian negara-negara ASEAN: Mengapa sungai ini menjadi sumber konflik antarnegara?",
        "options": [
            "Karena pembangunan bendungan oleh Cina mengurangi aliran air ke hilir",
            "Karena polusi industri dari Vietnam mempengaruhi perikanan di Kamboja",
            "Karena banjir musiman yang memerlukan kerjasama lintas batas",
            "Karena eksploitasi sumber daya mineral di dasar sungai"
        ],
        "correctAnswer": 0,
        "points": 4,
        "explanation": "Bendungan di Cina mengganggu aliran air, mempengaruhi pertanian dan perikanan di negara hilir seperti Vietnam dan Kamboja."
    },
    {
        "type": "mc",
        "question": "Evaluasilah dampak erupsi Gunung Merapi terhadap masyarakat sekitar: Apa strategi mitigasi terbaik untuk mengurangi risiko?",
        "options": [
            "Pembangunan bendungan sabo untuk menahan lahar",
            "Relokasi penduduk ke daerah aman",
            "Pendidikan masyarakat tentang tanda-tanda erupsi",
            "Pembangunan infrastruktur tahan gempa"
        ],
        "correctAnswer": 1,
        "points": 3,
        "explanation": "Relokasi adalah strategi jangka panjang untuk menghindari bahaya berulang dari lahar dan abu vulkanik."
    },
    {
        "type": "mc",
        "question": "Sintesislah pengaruh Samudra Hindia terhadap iklim Indonesia: Bagaimana fenomena Indian Ocean Dipole mempengaruhi curah hujan?",
        "options": [
            "Meningkatkan curah hujan saat fase positif",
            "Menyebabkan kekeringan saat fase negatif",
            "Stabil selama fase netral",
            "Tidak berpengaruh karena jarak yang jauh"
        ],
        "correctAnswer": 1,
        "points": 4,
        "explanation": "Fase negatif IOD menyebabkan air hangat bergeser ke timur, mengurangi curah hujan di Indonesia barat."
    },
    {
        "type": "mc",
        "question": "Analisislah perbedaan antara litosfer dan astenosfer: Mengapa perbedaan ini penting untuk teori lempeng tektonik?",
        "options": [
            "Litosfer kaku, astenosfer plastis, memungkinkan pergerakan lempeng",
            "Litosfer tipis, astenosfer tebal, mempengaruhi kedalaman gempa",
            "Litosfer dingin, astenosfer panas, menyebabkan vulkanisme",
            "Litosfer padat, astenosfer cair, menghasilkan magma"
        ],
        "correctAnswer": 0,
        "points": 3,
        "explanation": "Sifat plastis astenosfer memungkinkan litosfer bergerak di atasnya, menjelaskan pergeseran benua."
    },
    {
        "type": "mc",
        "question": "Evaluasilah keberhasilan program konservasi hutan mangrove di pantai utara Jawa: Apa tantangan utama yang dihadapi?",
        "options": [
            "Abrasi pantai yang terus menerus",
            "Konversi lahan untuk tambak udang",
            "Kurangnya partisipasi masyarakat lokal",
            "Pencemaran dari limbah industri"
        ],
        "correctAnswer": 1,
        "points": 4,
        "explanation": "Konversi lahan untuk akuakultur sering menghancurkan mangrove, meskipun program restorasi dilakukan."
    },
    {
        "type": "mc",
        "question": "Sintesislah hubungan antara urbanisasi dan degradasi lingkungan di Jakarta: Bagaimana subsidence tanah mempengaruhi kota ini?",
        "options": [
            "Penurunan permukaan tanah karena ekstraksi air tanah berlebih",
            "Peningkatan banjir karena drainase yang buruk",
            "Pencemaran udara dari lalu lintas kendaraan",
            "Semua jawaban di atas benar"
        ],
        "correctAnswer": 3,
        "points": 3,
        "explanation": "Subsidence di Jakarta disebabkan oleh ekstraksi air tanah, memperburuk banjir dan degradasi."
    },
    {
        "type": "mc",
        "question": "Analisislah peran Selat Malaka dalam perdagangan internasional: Mengapa selat ini rentan terhadap pembajakan?",
        "options": [
            "Lalu lintas kapal yang padat dan wilayah sempit",
            "Kurangnya patroli maritim dari negara sekitar",
            "Kondisi ekonomi miskin di pesisir",
            "Semua jawaban di atas benar"
        ],
        "correctAnswer": 3,
        "points": 4,
        "explanation": "Kombinasi lalu lintas tinggi, pengawasan lemah, dan kemiskinan mendorong pembajakan di Selat Malaka."
    },
    {
        "type": "mc",
        "question": "Evaluasilah dampak Revolusi Hijau terhadap pertanian Indonesia: Apa kelemahan utama dari penggunaan pupuk kimia berlebih?",
        "options": [
            "Degradasi tanah dan pencemaran air",
            "Peningkatan ketergantungan pada impor benih",
            "Penurunan biodiversitas tanaman",
            "Semua jawaban di atas benar"
        ],
        "correctAnswer": 3,
        "points": 4,
        "explanation": "Pupuk kimia menyebabkan degradasi tanah, pencemaran, dan hilangnya varietas tanaman lokal."
    },
    {
        "type": "mc",
        "question": "Sintesislah pengaruh Orde Baru terhadap demokrasi Indonesia: Bagaimana sentralisasi kekuasaan mempengaruhi otonomi daerah?",
        "options": [
            "Meningkatkan efisiensi tetapi menekan aspirasi lokal",
            "Mendorong korupsi di tingkat pusat",
            "Menghambat pembangunan merata",
            "Semua jawaban di atas benar"
        ],
        "correctAnswer": 3,
        "points": 4,
        "explanation": "Sentralisasi di Orde Baru menyebabkan ketidakmerataan dan penekanan terhadap daerah."
    },
    {
        "type": "mc",
        "question": "Analisislah peran Soekarno dalam Konferensi Asia-Afrika 1955: Mengapa konferensi ini penting untuk gerakan non-blok?",
        "options": [
            "Menyatukan negara-negara baru merdeka melawan kolonialisme",
            "Mempromosikan perdamaian di tengah Perang Dingin",
            "Meningkatkan posisi Indonesia di dunia internasional",
            "Semua jawaban di atas benar"
        ],
        "correctAnswer": 3,
        "points": 3,
        "explanation": "KAA menjadi dasar Gerakan Non-Blok, menyatukan negara ketiga."
    },
    {
        "type": "mc",
        "question": "Evaluasilah kebijakan ekonomi Orde Lama: Apa dampak dari nasionalisasi perusahaan asing terhadap investasi?",
        "options": [
            "Meningkatkan kontrol negara tetapi menurunkan kepercayaan investor",
            "Memicu inflasi karena kurangnya manajemen",
            "Mendorong swasembada pangan",
            "Mengurangi ketergantungan pada bantuan luar negeri"
        ],
        "correctAnswer": 0,
        "points": 4,
        "explanation": "Nasionalisasi menakut-nakuti investor asing, menyebabkan penurunan modal masuk."
    },
    {
        "type": "mc",
        "question": "Sintesislah hubungan antara Perjanjian Linggarjati dan agresi militer Belanda: Bagaimana perjanjian ini memicu konflik?",
        "options": [
            "Belanda melanggar perjanjian dengan menyerang wilayah Republik",
            "Indonesia menolak pengakuan atas negara boneka",
            "PBB terlibat untuk mediasi",
            "Semua jawaban di atas benar"
        ],
        "correctAnswer": 3,
        "points": 3,
        "explanation": "Pelanggaran Belanda terhadap Linggarjati memicu agresi dan intervensi internasional."
    },
    {
        "type": "mc",
        "question": "Analisislah dampak Reformasi 1998 terhadap sistem politik Indonesia: Mengapa amandemen UUD 1945 diperlukan?",
        "options": [
            "Untuk membatasi kekuasaan presiden dan memperkuat DPR",
            "Untuk menghapus dwifungsi ABRI",
            "Untuk memastikan pemilu yang demokratis",
            "Semua jawaban di atas benar"
        ],
        "correctAnswer": 3,
        "points": 4,
        "explanation": "Amandemen menyesuaikan konstitusi dengan tuntutan demokrasi pasca-Orde Baru."
    },
    {
        "type": "mc",
        "question": "Evaluasilah peran VOC dalam kolonialisme Belanda di Indonesia: Apa strategi utama VOC untuk monopolisasi perdagangan?",
        "options": [
            "Hongi tochten untuk menghancurkan tanaman rempah saingan",
            "Perjanjian dengan sultan lokal",
            "Pembangunan benteng di pelabuhan strategis",
            "Semua jawaban di atas benar"
        ],
        "correctAnswer": 3,
        "points": 3,
        "explanation": "VOC menggunakan kekerasan dan diplomasi untuk menguasai rempah-rempah."
    },
    {
        "type": "mc",
        "question": "Sintesislah pengaruh Hindu-Buddha terhadap kerajaan-kerajaan Nusantara: Bagaimana sistem kasta mempengaruhi struktur sosial?",
        "options": [
            "Menciptakan hierarki raja sebagai dewa-raja",
            "Mempromosikan seni dan arsitektur candi",
            "Memperkenalkan bahasa Sanskerta",
            "Semua jawaban di atas benar"
        ],
        "correctAnswer": 3,
        "points": 4,
        "explanation": "Pengaruh Hindu-Buddha membentuk sistem sosial dan budaya kerajaan seperti Majapahit."
    },
    {
        "type": "mc",
        "question": "Analisislah penyebab Perang Diponegoro: Mengapa perang ini dianggap sebagai perlawanan rakyat terbesar?",
        "options": [
            "Gabungan antara faktor agama, ekonomi, dan politik",
            "Dukungan luas dari masyarakat Jawa",
            "Strategi gerilya yang efektif",
            "Semua jawaban di atas benar"
        ],
        "correctAnswer": 3,
        "points": 4,
        "explanation": "Perang Diponegoro melibatkan rakyat luas melawan penindasan Belanda."
    },
    {
        "type": "mc",
        "question": "Evaluasilah dampak Politik Etis terhadap pendidikan di Indonesia: Apa kelemahan dari kebijakan ini?",
        "options": [
            "Hanya menjangkau kalangan priyayi, bukan rakyat biasa",
            "Meningkatkan kesadaran nasionalisme",
            "Mendorong migrasi ke kota",
            "Mengurangi angka buta huruf"
        ],
        "correctAnswer": 0,
        "points": 3,
        "explanation": "Politik Etis lebih menguntungkan elite, bukan massa rakyat."
    },
    {
        "type": "mc",
        "question": "Sintesislah peran Sumpah Pemuda dalam pergerakan nasional: Bagaimana sumpah ini mempersatukan pemuda Indonesia?",
        "options": [
            "Menekankan satu tanah air, bangsa, dan bahasa",
            "Mendorong pembentukan organisasi pemuda lintas etnis",
            "Menjadi dasar Hari Sumpah Pemuda",
            "Semua jawaban di atas benar"
        ],
        "correctAnswer": 3,
        "points": 4,
        "explanation": "Sumpah Pemuda menyatukan pemuda dari berbagai daerah untuk kemerdekaan."
    },
    {
        "type": "mc",
        "question": "Analisislah dampak inflasi tinggi terhadap masyarakat berpenghasilan rendah: Mengapa inflasi ini memperlebar kesenjangan sosial?",
        "options": [
            "Harga barang naik lebih cepat daripada upah",
            "Pengusaha besar bisa menaikkan harga produk",
            "Pemerintah kesulitan subsidi",
            "Semua jawaban di atas benar"
        ],
        "correctAnswer": 3,
        "points": 4,
        "explanation": "Inflasi memukul kelas bawah karena daya beli menurun, sementara kaya terlindungi."
    },
    {
        "type": "mc",
        "question": "Evaluasilah kebijakan subsidi BBM di Indonesia: Apa alternatif terbaik untuk mengurangi beban APBN?",
        "options": [
            "Beralih ke subsidi langsung tunai untuk masyarakat miskin",
            "Meningkatkan pajak kendaraan bermotor",
            "Promosi transportasi umum",
            "Semua jawaban di atas benar"
        ],
        "correctAnswer": 3,
        "points": 3,
        "explanation": "Subsidi langsung lebih tepat sasaran daripada subsidi umum yang dinikmati semua kelas."
    },
    {
        "type": "mc",
        "question": "Sintesislah hubungan antara ekspor minyak sawit dan deforestasi: Bagaimana kebijakan berkelanjutan dapat diterapkan?",
        "options": [
            "Sertifikasi RSPO untuk memastikan produksi ramah lingkungan",
            "Diversifikasi tanaman ke komoditas lain",
            "Penegakan hukum terhadap pembukaan lahan ilegal",
            "Semua jawaban di atas benar"
        ],
        "correctAnswer": 3,
        "points": 4,
        "explanation": "Ekspor sawit menyebabkan deforestasi, tetapi sertifikasi dan penegakan hukum bisa mitigasi."
    },
    {
        "type": "mc",
        "question": "Analisislah peran UMKM dalam perekonomian Indonesia: Mengapa UMKM lebih tahan terhadap krisis ekonomi?",
        "options": [
            "Fleksibilitas dan adaptasi cepat terhadap perubahan pasar",
            "Kurang bergantung pada pinjaman bank besar",
            "Fokus pada pasar lokal",
            "Semua jawaban di atas benar"
        ],
        "correctAnswer": 3,
        "points": 4,
        "explanation": "UMKM sering bertahan karena skala kecil dan orientasi domestik."
    },
    {
        "type": "mc",
        "question": "Evaluasilah dampak MEA terhadap tenaga kerja Indonesia: Apa tantangan utama bagi pekerja terampil?",
        "options": [
            "Persaingan dengan tenaga kerja asing yang lebih kompetitif",
            "Kurangnya pengakuan sertifikasi internasional",
            "Mobilitas tenaga kerja yang terbatas",
            "Semua jawaban di atas benar"
        ],
        "correctAnswer": 3,
        "points": 3,
        "explanation": "MEA membuka persaingan, tetapi Indonesia perlu tingkatkan skill dan sertifikasi."
    },
    {
        "type": "mc",
        "question": "Sintesislah pengaruh nilai tukar rupiah terhadap impor: Bagaimana depresiasi rupiah mempengaruhi inflasi?",
        "options": [
            "Membuat impor lebih mahal, mendorong inflasi impor",
            "Meningkatkan ekspor, menstabilkan neraca perdagangan",
            "Menurunkan daya saing produk lokal",
            "Mengurangi cadangan devisa"
        ],
        "correctAnswer": 0,
        "points": 4,
        "explanation": "Depresiasi membuat barang impor mahal, yang ditransfer ke konsumen sebagai inflasi."
    },
    {
        "type": "mc",
        "question": "Analisislah kebijakan pajak progresif: Mengapa sistem ini dianggap adil dalam redistribusi kekayaan?",
        "options": [
            "Orang kaya membayar persentase lebih tinggi, mengurangi kesenjangan",
            "Mendorong investasi di kalangan menengah",
            "Meningkatkan penerimaan negara untuk program sosial",
            "Semua jawaban di atas benar"
        ],
        "correctAnswer": 3,
        "points": 4,
        "explanation": "Pajak progresif membantu redistribusi dari kaya ke miskin melalui program pemerintah."
    },
    {
        "type": "mc",
        "question": "Evaluasilah peran bank sentral dalam mengendalikan inflasi: Apa instrumen utama yang digunakan BI?",
        "options": [
            "Suku bunga acuan untuk mengatur likuiditas",
            "Operasi pasar terbuka untuk jual beli surat berharga",
            "Cadangan wajib bank",
            "Semua jawaban di atas benar"
        ],
        "correctAnswer": 3,
        "points": 3,
        "explanation": "Bank Indonesia menggunakan berbagai alat moneter untuk stabilisasi."
    },
    {
        "type": "mc",
        "question": "Sintesislah dampak pandemi COVID-19 terhadap sektor pariwisata: Bagaimana diversifikasi ekonomi dapat membantu pemulihan?",
        "options": [
            "Mengembangkan ekowisata dan wisata virtual",
            "Investasi di sektor kesehatan dan teknologi",
            "Kerjasama internasional untuk vaksinasi",
            "Semua jawaban di atas benar"
        ],
        "correctAnswer": 3,
        "points": 4,
        "explanation": "Diversifikasi mengurangi ketergantungan pada pariwisata yang rentan pandemi."
    },
    {
        "type": "mc",
        "question": "Analisislah perbedaan antara ekonomi pasar dan ekonomi komando: Mengapa Indonesia mengadopsi sistem campuran?",
        "options": [
            "Untuk menggabungkan efisiensi pasar dengan intervensi negara",
            "Untuk menghindari monopoli swasta",
            "Untuk memastikan kesejahteraan sosial",
            "Semua jawaban di atas benar"
        ],
        "correctAnswer": 3,
        "points": 4,
        "explanation": "Sistem campuran memadukan kebebasan pasar dengan pengawasan pemerintah."
    },
    {
        "type": "mc",
        "question": "Evaluasilah dampak media sosial terhadap interaksi sosial: Apa risiko utama dari penggunaan berlebih?",
        "options": [
            "Penurunan kualitas hubungan tatap muka",
            "Penyebaran cyberbullying",
            "Hilangnya privasi",
            "Semua jawaban di atas benar"
        ],
        "correctAnswer": 3,
        "points": 3,
        "explanation": "Media sosial mengubah interaksi menjadi virtual, dengan risiko psikologis."
    },
    {
        "type": "mc",
        "question": "Sintesislah hubungan antara stratifikasi sosial dan mobilitas vertikal: Bagaimana pendidikan mempengaruhi hal ini?",
        "options": [
            "Pendidikan membuka peluang naik kelas sosial",
            "Stratifikasi membatasi akses pendidikan bagi kelas bawah",
            "Mobilitas vertikal tergantung pada meritokrasi",
            "Semua jawaban di atas benar"
        ],
        "correctAnswer": 3,
        "points": 4,
        "explanation": "Pendidikan adalah kunci mobilitas, tetapi stratifikasi sering menghambat akses."
    },
    {
        "type": "mc",
        "question": "Analisislah proses akulturasi di masyarakat multikultural Indonesia: Mengapa akulturasi lebih sering terjadi daripada asimilasi?",
        "options": [
            "Karena kelompok mempertahankan identitas sambil mengadopsi elemen baru",
            "Asimilasi memerlukan hilangnya identitas asli",
            "Akulturasi didorong oleh globalisasi",
            "Semua jawaban di atas benar"
        ],
        "correctAnswer": 3,
        "points": 4,
        "explanation": "Akulturasi memungkinkan pertukaran budaya tanpa kehilangan identitas."
    },
    {
        "type": "mc",
        "question": "Evaluasilah peran norma sosial dalam mengendalikan perilaku: Apa konsekuensi jika norma dilanggar?",
        "options": [
            "Sanksi sosial seperti pengucilan",
            "Hilangnya kepercayaan masyarakat",
            "Konflik internal dalam kelompok",
            "Semua jawaban di atas benar"
        ],
        "correctAnswer": 3,
        "points": 3,
        "explanation": "Norma menjaga ketertiban, pelanggaran menyebabkan sanksi dan ketidakharmonisan."
    },
    {
        "type": "mc",
        "question": "Sintesislah dampak urbanisasi terhadap struktur keluarga: Bagaimana urbanisasi mengubah keluarga inti dari keluarga luas?",
        "options": [
            "Keluarga inti lebih adaptif di kota dengan ruang terbatas",
            "Kurangnya dukungan dari kerabat luas",
            "Peningkatan peran wanita bekerja",
            "Semua jawaban di atas benar"
        ],
        "correctAnswer": 3,
        "points": 4,
        "explanation": "Urbanisasi mendorong keluarga kecil untuk efisiensi ekonomi dan ruang."
    },
    {
        "type": "mc",
        "question": "Analisislah konflik sosial di Papua: Mengapa isu otonomi khusus belum menyelesaikan masalah?",
        "options": [
            "Kurangnya implementasi yang efektif",
            "Ketidakadilan distribusi sumber daya",
            "Pengaruh separatisme",
            "Semua jawaban di atas benar"
        ],
        "correctAnswer": 3,
        "points": 4,
        "explanation": "Otonomi khusus gagal karena korupsi dan ketidakmerataan."
    },
    {
        "type": "mc",
        "question": "Evaluasilah keberhasilan program desa wisata: Apa faktor kunci untuk keberlanjutan?",
        "options": [
            "Partisipasi masyarakat lokal",
            "Pengelolaan lingkungan yang baik",
            "Promosi digital",
            "Semua jawaban di atas benar"
        ],
        "correctAnswer": 3,
        "points": 3,
        "explanation": "Desa wisata berhasil jika melibatkan warga dan menjaga keberlanjutan."
    },
    {
        "type": "mc",
        "question": "Sintesislah peran gender dalam pembagian kerja: Bagaimana feminisme mempengaruhi perubahan ini?",
        "options": [
            "Mendorong kesetaraan akses pekerjaan",
            "Mengurangi stereotip gender",
            "Meningkatkan partisipasi wanita di sektor formal",
            "Semua jawaban di atas benar"
        ],
        "correctAnswer": 3,
        "points": 4,
        "explanation": "Feminisme menantang pembagian kerja tradisional berbasis gender."
    },
    {
        "type": "mc",
        "question": "Analisislah dampak globalisasi terhadap budaya lokal: Mengapa homogenisasi budaya menjadi ancaman?",
        "options": [
            "Dominasi budaya Barat melalui media",
            "Hilangnya tradisi unik",
            "Peningkatan konsumerisme",
            "Semua jawaban di atas benar"
        ],
        "correctAnswer": 3,
        "points": 4,
        "explanation": "Globalisasi menyebabkan erosi budaya lokal oleh pengaruh asing."
    },
    {
        "type": "mc",
        "question": "Evaluasilah integrasi sosial di masyarakat plural: Apa strategi terbaik untuk mencegah disintegrasi?",
        "options": [
            "Pendidikan multikultural",
            "Kebijakan afirmasi untuk minoritas",
            "Dialog antaragama",
            "Semua jawaban di atas benar"
        ],
        "correctAnswer": 3,
        "points": 3,
        "explanation": "Integrasi memerlukan pendidikan dan kebijakan inklusif."
    },
    {
        "type": "fi",
        "question": "Fenomena alam di mana lempeng tektonik bertabrakan menyebabkan pembentukan pegunungan disebut...",
        "correctAnswer": "OROGENESIS",
        "points": 4,
        "explanation": "Orogenesis adalah proses pembentukan gunung melalui tabrakan lempeng."
    },
    {
        "type": "fi",
        "question": "Perjanjian internasional yang mengatur perdagangan bebas di ASEAN disebut...",
        "correctAnswer": "AFTA",
        "points": 3,
        "explanation": "AFTA adalah ASEAN Free Trade Area untuk mengurangi tarif perdagangan."
    },
    {
        "type": "fi",
        "question": "Tokoh yang memimpin perlawanan rakyat Bali melawan Belanda pada 1908 disebut...",
        "correctAnswer": "PUPUTAN",
        "points": 4,
        "explanation": "Puputan adalah perlawanan heroik raja-raja Bali."
    },
    {
        "type": "fi",
        "question": "Kurva yang menunjukkan hubungan antara inflasi dan pengangguran disebut kurva...",
        "correctAnswer": "PHILLIPS",
        "points": 4,
        "explanation": "Kurva Phillips menunjukkan trade-off antara inflasi dan pengangguran."
    },
    {
        "type": "fi",
        "question": "Proses di mana individu mengadopsi nilai-nilai kelompok disebut...",
        "correctAnswer": "INTERNALISASI",
        "points": 3,
        "explanation": "Internalisasi adalah bagian dari sosialisasi di mana nilai menjadi bagian diri."
    },
    {
        "type": "fi",
        "question": "Bentuk konflik sosial yang melibatkan perebutan sumber daya terbatas disebut konflik...",
        "correctAnswer": "REALISTIS",
        "points": 4,
        "explanation": "Konflik realistis berdasarkan kompetisi sumber daya, berbeda dengan non-realistis."
    },
    {
        "type": "fi",
        "question": "Teori yang menjelaskan perubahan sosial melalui konflik kelas disebut teori...",
        "correctAnswer": "MARXIS",
        "points": 4,
        "explanation": "Teori Marx melihat perubahan melalui dialektika kelas buruh dan kapitalis."
    },
    {
        "type": "fi",
        "question": "Indeks yang mengukur ketidakmerataan pendapatan disebut indeks...",
        "correctAnswer": "GINI",
        "points": 3,
        "explanation": "Indeks Gini mengukur distribusi pendapatan, 0 sempurna setara, 1 tidak setara."
    },
    {
        "type": "fi",
        "question": "Periode sejarah Indonesia pasca kemerdekaan hingga 1950 disebut periode...",
        "correctAnswer": "REVOLUSI",
        "points": 4,
        "explanation": "Periode Revolusi Fisik melibatkan perjuangan mempertahankan kemerdekaan."
    },
    {
        "type": "fi",
        "question": "Fenomena cuaca ekstrem yang disebabkan oleh pemanasan permukaan Samudra Pasifik disebut...",
        "correctAnswer": "ELNINO",
        "points": 4,
        "explanation": "El Nino menyebabkan kekeringan di Indonesia."
    }
    ];
                

// Total: 70 PG + 30 Isian
        // ======================
        // GAME STATE
        // ======================
        let currentQuestionIndex = 0;
        let score = 0;
        let correctAnswers = 0;
        let incorrectAnswers = 0;
        let timeLeft = 30;
        let timerInterval;
        let startTime;
        let playerName = "";
        let playerUsername = "";
        let timeBonus = 0;

        // ======================
        // DOM ELEMENTS
        // ======================
        const loginScreen = document.getElementById('loginScreen');
        const quizContainer = document.getElementById('quizContainer');
        const resultsScreen = document.getElementById('resultsScreen');
        const loginForm = document.getElementById('loginForm');
        const questionCard = document.getElementById('questionCard');
        const feedbackContainer = document.getElementById('feedbackContainer');
        const feedbackMessage = document.getElementById('feedbackMessage');
        const nextButton = document.getElementById('nextButton');
        const scoreDisplay = document.getElementById('scoreDisplay');
        const timerDisplay = document.getElementById('timerDisplay');
        const quizProgress = document.getElementById('quizProgress');
        const questionTimer = document.getElementById('questionTimer');
        const progressText = document.getElementById('progressText');
        const playerNameDisplay = document.getElementById('playerNameDisplay');
        const playerInitial = document.getElementById('playerInitial');
        const finalScore = document.getElementById('finalScore');
        const correctCount = document.getElementById('correctCount');
        const incorrectCount = document.getElementById('incorrectCount');
        const timeTaken = document.getElementById('timeTaken');
        const medalIcon = document.getElementById('medalIcon');
        const resultTitle = document.getElementById('resultTitle');
        const resultSubtitle = document.getElementById('resultSubtitle');
        const fireEffect = document.getElementById('fireEffect');

        // ======================
        // INITIALIZATION
        // ======================
        document.addEventListener('DOMContentLoaded', function() {
            // Setup event listeners
            loginForm.addEventListener('submit', handleLogin);
            nextButton.addEventListener('click', nextQuestion);
        });

        // ======================
        // FUNCTIONS
        // ======================
        function handleLogin(e) {
            e.preventDefault();
            
            const nameInput = document.getElementById('playerName');
            const usernameInput = document.getElementById('playerUsername');
            
            playerName = nameInput.value.trim();
            playerUsername = usernameInput.value.trim();
            
            // Validasi username
            const validUsernames = ['aa', 'bb', 'cc', 'dd', 'ee', 'ff', 'gg', 'hh', 'ii', 'jj'];
            if (!validUsernames.includes(playerUsername)) {
                Swal.fire({
                    title: 'Username Tidak Valid',
                    text: 'Silakan pilih username dari aa hingga jj',
                    icon: 'error',
                    confirmButtonText: 'OK'
                });
                return;
            }
            
            if (!playerName) {
                Swal.fire({
                    title: 'Nama Harus Diisi',
                    text: 'Silakan masukkan nama lengkap Anda',
                    icon: 'error',
                    confirmButtonText: 'OK'
                });
                return;
            }
            
            // Simpan data player
            playerNameDisplay.textContent = playerName;
            playerInitial.textContent = playerName.charAt(0).toUpperCase();
            
            // Tampilkan animasi loading
            Swal.fire({
                title: 'Memuat Quiz...',
                allowOutsideClick: false,
                didOpen: () => {
                    Swal.showLoading();
                }
            });
            
            // Pindah ke quiz setelah 1 detik (simulasi loading)
            setTimeout(() => {
                Swal.close();
                startQuiz();
            }, 1000);
        }
        
        function startQuiz() {
            loginScreen.classList.add('hidden');
            quizContainer.classList.remove('hidden');
            resultsScreen.classList.add('hidden');
            
            // Reset state
            currentQuestionIndex = 0;
            score = 0;
            correctAnswers = 0;
            incorrectAnswers = 0;
            timeBonus = 0;
            startTime = new Date();
            
            loadQuestion();
        }
        
        function loadQuestion() {
            const question = quizData[currentQuestionIndex];
            
            // Update UI
            scoreDisplay.textContent = score;
            progressText.textContent = `${currentQuestionIndex + 1}/${quizData.length}`;
            quizProgress.style.width = `${((currentQuestionIndex + 1) / quizData.length) * 100}%`;
            
            // Set timer berdasarkan jenis soal
            timeLeft = (question.type === 'mc' ? 30 : 45) + timeBonus;
            timeBonus = 0; // Reset bonus setelah digunakan
            updateTimerDisplay();
            
            // Start timer
            clearInterval(timerInterval);
            timerInterval = setInterval(updateTimer, 1000);
            
            // Bangun tampilan soal
            let questionHTML = `
                <div class="mb-6">
                    <div class="flex justify-between items-start">
                        <h3 class="text-xl font-semibold text-gray-800">${question.question}</h3>
                        <span class="bg-orange-500 text-white px-3 py-1 rounded-full text-sm font-semibold ml-4">
                            ${question.points} Poin
                        </span>
                    </div>
            `;
            
            if (question.type === 'mc') {
                questionHTML += '<div class="mt-6 space-y-3">';
                question.options.forEach((option, index) => {
                    questionHTML += `
                        <button onclick="selectAnswer(${index})" 
                                class="w-full text-left p-4 rounded-lg border border-gray-300 hover:border-orange-500 hover:bg-orange-50 transition-all">
                            <span class="font-bold text-orange-500">${String.fromCharCode(65 + index)}.</span> ${option}
                        </button>
                    `;
                });
                questionHTML += '</div>';
            } else {
                questionHTML += `
                    <div class="mt-6">
                        <input type="text" id="fillAnswer" 
                               class="w-full p-4 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-orange-500"
                               placeholder="Ketik jawaban dalam HURUF BESAR">
                        <button onclick="checkFillAnswer()" 
                                class="mt-4 btn-primary text-white px-6 py-3 rounded-lg font-semibold w-full">
                            Submit Jawaban
                        </button>
                    </div>
                `;
            }
            
            questionHTML += '</div>';
            questionCard.innerHTML = questionHTML;
            
            // Sembunyikan feedback dan next button
            feedbackContainer.classList.add('hidden');
            nextButton.classList.add('hidden');
        }
        
        function updateTimer() {
            timeLeft--;
            updateTimerDisplay();
            
            if (timeLeft <= 0) {
                clearInterval(timerInterval);
                handleTimeOut();
            } else if (timeLeft <= 5) {
                timerDisplay.classList.add('text-red-500', 'timer-danger');
            }
        }
        
        function updateTimerDisplay() {
            timerDisplay.textContent = `${timeLeft}s`;
            const totalTime = quizData[currentQuestionIndex].type === 'mc' ? 30 : 45;
            questionTimer.style.width = `${(timeLeft / totalTime) * 100}%`;
        }
        
        function selectAnswer(selectedIndex) {
            clearInterval(timerInterval);
            const question = quizData[currentQuestionIndex];
            const optionButtons = questionCard.querySelectorAll('button');
            
            // Nonaktifkan semua tombol
            optionButtons.forEach(btn => btn.disabled = true);
            
            // Tandai jawaban benar
            optionButtons[question.correctAnswer].classList.add('bg-green-100', 'border-green-500', 'correct-answer');
            
            if (selectedIndex === question.correctAnswer) {
                // Jawaban benar
                handleCorrectAnswer(question.points);
            } else {
                // Jawaban salah
                optionButtons[selectedIndex].classList.add('bg-red-100', 'border-red-500', 'incorrect-shake');
                handleIncorrectAnswer(question.options[question.correctAnswer]);
            }
        }
        
        function checkFillAnswer() {
            const input = document.getElementById('fillAnswer');
            const userAnswer = input.value.trim().toUpperCase();
            const question = quizData[currentQuestionIndex];
            
            if (!userAnswer) {
                Swal.fire({
                    title: 'Jawaban Kosong',
                    text: 'Silakan ketik jawaban Anda terlebih dahulu',
                    icon: 'warning',
                    confirmButtonText: 'OK'
                });
                return;
            }
            
            clearInterval(timerInterval);
            input.disabled = true;
            
            if (userAnswer === question.correctAnswer) {
                input.classList.add('bg-green-100', 'border-green-500', 'correct-answer');
                handleCorrectAnswer(question.points);
            } else {
                input.classList.add('bg-red-100', 'border-red-500', 'incorrect-shake');
                handleIncorrectAnswer(question.correctAnswer);
            }
        }
        
        function handleCorrectAnswer(points) {
            const question = quizData[currentQuestionIndex];
            
            // Hitung skor
            score += points;
            correctAnswers++;
            
            // Bonus waktu jika menjawab cepat
            const timeUsed = (question.type === 'mc' ? 30 : 45) - timeLeft;
            if (timeUsed < 10) {
                timeBonus = 5;
                showFeedback(`â Benar! +${points} poin<br><small>Bonus +5 detik untuk soal berikutnya!</small>`, 'success');
            } else {
                showFeedback(`â Benar! +${points} poin`, 'success');
            }
            
            // Update score display
            scoreDisplay.textContent = score;
            
            // Confetti effect
            createConfetti();
            
            // Tampilkan next button
            nextButton.classList.remove('hidden');
        }
        
        function handleIncorrectAnswer(correctAnswer) {
            const question = quizData[currentQuestionIndex];
            
            // Hitung skor (minus 1, minimal 0)
            score = Math.max(0, score - 1);
            incorrectAnswers++;
            
            // Tampilkan feedback
            showFeedback(`â Salah!<br><small>Jawaban benar: ${correctAnswer}</small>`, 'error');
            
            // Update score display
            scoreDisplay.textContent = score;
            
            // Tampilkan next button
            nextButton.classList.remove('hidden');
        }
        
        function handleTimeOut() {
            const question = quizData[currentQuestionIndex];
            
            // Hitung skor (minus 1, minimal 0)
            score = Math.max(0, score - 1);
            incorrectAnswers++;
            
            // Tampilkan feedback
            let correctAnswer = question.type === 'mc' ? question.options[question.correctAnswer] : question.correctAnswer;
            showFeedback(`â± Waktu habis!<br><small>Jawaban benar: ${correctAnswer}</small>`, 'warning');
            
            // Update score display
            scoreDisplay.textContent = score;
            
            // Tampilkan next button
            nextButton.classList.remove('hidden');
            
            // Nonaktifkan input/jawaban
            if (question.type === 'mc') {
                const optionButtons = questionCard.querySelectorAll('button');
                optionButtons.forEach(btn => btn.disabled = true);
                optionButtons[question.correctAnswer].classList.add('bg-green-100', 'border-green-500');
            } else {
                const input = document.getElementById('fillAnswer');
                if (input) input.disabled = true;
            }
        }
        
        function showFeedback(message, type) {
            feedbackMessage.innerHTML = message;
            
            // Set warna berdasarkan type
            feedbackContainer.className = 'mt-6 text-center p-4 rounded-lg font-bold text-lg';
            if (type === 'success') {
                feedbackContainer.classList.add('bg-green-100', 'text-green-700');
            } else if (type === 'error') {
                feedbackContainer.classList.add('bg-red-100', 'text-red-700');
            } else {
                feedbackContainer.classList.add('bg-yellow-100', 'text-yellow-700');
            }
            
            feedbackContainer.classList.remove('hidden');
        }
        
        function nextQuestion() {
            currentQuestionIndex++;
            
            // Reset timer styling
            timerDisplay.classList.remove('text-red-500', 'timer-danger');
            
            if (currentQuestionIndex < quizData.length) {
                loadQuestion();
            } else {
                showResults();
            }
        }
        
        function showResults() {
            quizContainer.classList.add('hidden');
            resultsScreen.classList.remove('hidden');
            
            // Hitung waktu yang digunakan
            const endTime = new Date();
            const totalSeconds = Math.floor((endTime - startTime) / 1000);
            const minutes = Math.floor(totalSeconds / 60);
            const seconds = totalSeconds % 60;
            
            // Tentukan medali berdasarkan skor
            let medal = 'ð¥';
            let title = 'Bagus!';
            let subtitle = 'Kamu mendapat medali perunggu!';
            
            if (score >= 160) { // 40% dari maksimal (400)
                medal = 'ð';
                title = 'Luar Biasa!';
                subtitle = 'Kamu mendapat medali emas!';
                medalIcon.classList.add('medal-glow');
                fireEffect.classList.remove('hidden');
            } else if (score >= 120) { // 30% dari maksimal
                medal = 'ð¥';
                title = 'Hebat!';
                subtitle = 'Kamu mendapat medali perak!';
                medalIcon.classList.add('medal-glow');
            } else {
                medalIcon.classList.remove('medal-glow');
                fireEffect.classList.add('hidden');
            }
            
            // Update UI
            medalIcon.textContent = medal;
            resultTitle.textContent = title;
            resultSubtitle.textContent = subtitle;
            finalScore.textContent = score;
            correctCount.textContent = correctAnswers;
            incorrectCount.textContent = incorrectAnswers;
            timeTaken.textContent = `${minutes}:${seconds.toString().padStart(2, '0')}`;
        }
        
        function createConfetti() {
            for (let i = 0; i < 20; i++) {
                setTimeout(() => {
                    const confetti = document.createElement('div');
                    confetti.className = 'confetti';
                    confetti.style.left = Math.random() * 100 + '%';
                    confetti.style.backgroundColor = ['#FF6B00', '#F4C425', '#4A90E2', '#10B981'][Math.floor(Math.random() * 4)];
                    document.body.appendChild(confetti);
                    
                    setTimeout(() => {
                        confetti.remove();
                    }, 2000);
                }, i * 100);
            }
        }
        
        function restartQuiz() {
            resultsScreen.classList.add('hidden');
            startQuiz();
        }
        
        function shareResults() {
            const shareText = `ðï¸ ${playerName} baru saja menyelesaikan Quiz OSN IPS di WUIZZIZZZ dengan skor ${score} poin!\n\nâ ${correctAnswers} benar | â ${incorrectAnswers} salah | â± ${timeTaken.textContent}\n\nAyo uji pengetahuanmu juga!`;
            
            if (navigator.share) {
                navigator.share({
                    title: 'Hasil Quiz WUIZZIZZZ',
                    text: shareText
                }).catch(err => {
                    console.log('Error sharing:', err);
                    copyToClipboard(shareText);
                });
            } else {
                copyToClipboard(shareText);
            }
        }
        
        function copyToClipboard(text) {
            navigator.clipboard.writeText(text).then(() => {
                Swal.fire({
                    title: 'Tersalin!',
                    text: 'Hasil quiz telah disalin ke clipboard',
                    icon: 'success',
                    timer: 2000
                });
            });
        }
        
        function showHome() {
            Swal.fire({
                title: 'Yakin ingin keluar?',
                text: 'Progress quiz saat ini akan hilang',
                icon: 'warning',
                showCancelButton: true,
                confirmButtonColor: '#3085d6',
                cancelButtonColor: '#d33',
                confirmButtonText: 'Ya, keluar',
                cancelButtonText: 'Batal'
            }).then((result) => {
                if (result.isConfirmed) {
                    quizContainer.classList.add('hidden');
                    resultsScreen.classList.add('hidden');
                    loginScreen.classList.remove('hidden');
                }
            });
        }

        // Expose functions to global scope for HTML onclick
        window.selectAnswer = selectAnswer;
        window.checkFillAnswer = checkFillAnswer;
        window.restartQuiz = restartQuiz;
        window.shareResults = shareResults;
        window.showHome = showHome;
    </script>
</body>
</html>
